{"version":3,"sources":["FirebaseConfig.js","components/resumeBanner/BtnPortfolio.js","services/firebaseAuth/signOut.js","components/Navigation.js","pages/HomePage.js","components/ErrorForm.js","services/firebaseAuth/signIn.js","pages/LoginPage.js","services/user/createFBUserWithEmailandPass.js","services/user/createUserDoc.js","services/user/registerUser.js","pages/RegisterPage.js","components/TasksList.js","services/firebaseAuth/getCurrentAuthUser.js","services/task/useTaskList.js","services/general/containsBadChar.js","services/general/extractSearchKeywords.js","services/task/filterTask.js","pages/DashboardPage.js","services/user/getUserInfo.js","services/user/getCurrentUserInfo.js","services/task/getTaskObj.js","services/task/useEmployeeList.js","services/task/addTask.js","services/task/updateTask.js","services/task/addComment.js","components/TaskForm.js","components/CommentsList.js","services/task/useComments.js","components/CommentsSection.js","pages/TaskPage.js","pages/NotFoundPage.js","services/user/updateUserInfo.js","pages/EditUserPage.js","services/general/ProtectedRoute.js","services/firebaseAuth/useAuth.js","services/firebaseAuth/addAuthListener.js","App.js","services/user/useFirestoreUserDoc.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","functions","useEmulator","BtnPortfolio","setTimeout","element","document","querySelector","addEventListener","e","target","style","cssText","href","aria-describedby","tabIndex","className","Provider","value","id","signOut","a","auth","Error","Navigation","userObj","to","name","onClick","Home","isAuth","navigate","ErrorForm","prop","errorMessage","signIn","email","password","signInWithEmailAndPassword","result","Login","useState","loginUser","changeLoginUser","handleChange","onSubmit","preventDefault","then","user","catch","error","message","htmlFor","required","type","placeholder","onChange","createFBUserWithEmailandPass","createUserWithEmailAndPassword","newUserCredential","uid","createUserDoc","jobLevel","firestore","collection","doc","set","registerUser","alert","console","log","Register","passOne","passTwo","regData","setRegData","setErrorMessage","registrationInfo","useEffect","defaultValue","TasksList","filteredTasksArray","length","myTask","map","task","data-toggle","data-target","aria-expanded","aria-controls","title","taskId","stopPropagation","handleClick","taskName","aria-labelledby","data-parent","priority","dateDue","taskDescription","getCurrentAuthUser","currentUser","useTaskList","tasksCreator","useUserBelongToTask","tasksResponsible","arr","getHash","item","seenHash","Set","filter","has","add","removeDuplicateArr","userTypeFilter","userAuthObj","tasks","setTasks","tasksArray","unsubscribe","where","onSnapshot","snapshot","docs","data","serverTimestamps","obj","simpleDate","dateCreated","toDate","toISOString","slice","status","nameTaskCreator","nameTaskCreatorId","nameResponsible","nameResponsibleId","containsBadChar","str","test","extractSearchKeywords","searchTermArray","trim","toLowerCase","split","filterTask","taskList","searchCriteria","orderBy","orderedList","sort","b","Date","parse","orderByRecent","orderByDate","p1Array","elt","p2Array","orderByPriority","results","keyword","includes","searchByKeyword","DashboardPage","setOrderby","setSearchCriteria","undefined","aria-label","autoFocus","disabled","db","getUserInfo","userId","docReference","get","docSnapShot","exists","docData","getCurrentUserInfo","getTaskObj","taskRef","docRef","useEmployeeList","employees","setEmployees","usersArray","addTask","taskObj","tasksRef","docSnap","updateTask","update","addComment","comment","collectionRef","timestamp","FieldValue","serverTimestamp","newDocRef","TaskForm","setuserObj","setTaskObj","existingTaskObj","setExistingTaskObj","taskObjPresets","setTaskObjPresets","employeeL1List","data-key","employeeL2List","changeMenuColor","htmlElement","setAttribute","autoCommentBot","newComment","old","taskInfo","getTaskandSet","securedElements","querySelectorAll","attributes","setNamedItem","createAttribute","priorityMenus","statusMenus","buttonRef","hasAttribute","removeNamedItem","data-secured","selectedIndex","options","responsibleUserId","getAttribute","hidden","label","cols","rows","CommentsList","commentJSX","comments","setComments","commentsArray","useComments","toDateString","CommentsSection","setNewComment","handleSubmit","TaskPage","useParams","NotFound","updateUserInfo","ObjToBeSaved","EditUserPage","existingData","setExistingData","newData","setNewData","loadUserData","ProtectedRoute","isLoading","children","useAuth","authUser","authInfo","setAuthInfo","callback","onAuthStateChanged","userCredential","App","setUserObj","useFirestoreUserDoc","HomePage","path","LoginPage","RegisterPage","default","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2d7f76f6.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\n// import 'firebase/analytics'\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\nimport 'firebase/functions'\r\nimport 'firebase/storage'\r\n\r\nconst firebaseConfig = {\r\n\tapiKey: 'AIzaSyC4AqLcu0oB49R0374JDOr-CQJOIsfS8Yw',\r\n\tauthDomain: 'task-tracker-84155.firebaseapp.com',\r\n\tdatabaseURL: 'https://task-tracker-84155.firebaseio.com',\r\n\tprojectId: 'task-tracker-84155',\r\n\tstorageBucket: 'task-tracker-84155.appspot.com',\r\n\tmessagingSenderId: '383114024098',\r\n\tappId: '1:383114024098:web:08712aa4c5d195057333fb',\r\n\tmeasurementId: 'G-C9X0PD11Q6',\r\n}\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig)\r\n// firebase.analytics()\r\nfirebase.functions().useEmulator('http://localhost:5001')\r\n\r\n// export const provider = new firebase.auth.GoogleAuthProvider()\r\n// export const auth = firebase.auth()\r\n\r\nexport default firebase\r\n","/*\r\nPOPOUT Button component to link back to Kiu's portfolio\r\nhas the css, js, and html component\r\nTHis component enable a hovering action for the banner 'Return to Kiu's resume page'\r\n*/\r\nimport React from 'react'\r\nimport {FaRegCaretSquareLeft} from 'react-icons/fa'\r\nimport {IconContext} from 'react-icons'\r\nimport './btnPortfolio.css'\r\n\r\nexport default function BtnPortfolio() {\r\n\tsetTimeout(() => {\r\n\t\tlet element = document.querySelector('.return-pop-out')\r\n\t\telement.addEventListener('mouseenter', (e) => {\r\n\t\t\te.target.style.cssText =\r\n\t\t\t\t'-webkit-transform: translate(-205px, 0px);\ttransform: translate(-205px, 0px);'\r\n\t\t})\r\n\t\telement.addEventListener('mouseleave', (e) => {\r\n\t\t\te.target.style.cssText =\r\n\t\t\t\t'-webkit-transform: translate(0px, 0px);\ttransform: translate(0px, 0px);'\r\n\t\t})\r\n\t}, 4500)\r\n\r\n\treturn (\r\n\t\t<aside>\r\n\t\t\t<a\r\n\t\t\t\thref=\"https://zkiu.github.io/kiu-resume-portfolio/\"\r\n\t\t\t\taria-describedby=\"return to resume\"\r\n\t\t\t\ttabIndex=\"20\"\r\n\t\t\t\tclassName=\"return-pop-out\"\r\n\t\t\t>\r\n\t\t\t\t<IconContext.Provider value={{className: 'icon'}}>\r\n\t\t\t\t\t<FaRegCaretSquareLeft />\r\n\t\t\t\t</IconContext.Provider>\r\n\t\t\t\t<div id=\"return\">Return to Kiu's resume page</div>\r\n\t\t\t</a>\r\n\t\t</aside>\r\n\t)\r\n}\r\n","import firebase from 'firebase/app'\r\n\r\n// Wrapper for Firebase api\r\nexport const signOut = async () => {\r\n\ttry {\r\n\t\tawait firebase.auth().signOut()\r\n\t} catch (error) {\r\n\t\tthrow new Error('Error with sign out')\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport {Link} from '@reach/router'\r\nimport {RiCheckDoubleLine} from 'react-icons/ri'\r\n\r\nimport {signOut} from '../services/firebaseAuth/signOut'\r\n\r\nfunction Navigation({userObj}) {\r\n\tfunction logoutUser() {\r\n\t\tsignOut()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<nav className=\"site-nav family-sans navbar navbar-expand bg-primary navbar-dark higher\">\r\n\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t<Link to=\"/\" className=\"navbar-brand\">\r\n\t\t\t\t\t<RiCheckDoubleLine className=\"mr-1\" />\r\n\t\t\t\t\tTask Tracker\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t<div className=\"navbar-nav ml-auto\">\r\n\t\t\t\t\t{/* if userObj is null then display the JSX */}\r\n\t\t\t\t\t{!userObj && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Link className=\"nav-item nav-link\" to=\"register\">\r\n\t\t\t\t\t\t\t\tregister\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t{/* ** make login into a dropdown menu https://getbootstrap.com/docs/4.5/components/dropdowns/#forms*/}\r\n\t\t\t\t\t\t\t<Link className=\"nav-item nav-link\" to=\"login\">\r\n\t\t\t\t\t\t\t\tlog in\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* if userObj is NOT null then display the JSX */}\r\n\t\t\t\t\t{userObj && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Link className=\"nav-item nav-link\" to={'editUser/' + userObj.id}>\r\n\t\t\t\t\t\t\t\t{userObj.name + ','}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tclassName=\"nav-item nav-link\"\r\n\t\t\t\t\t\t\t\tto=\"/login\"\r\n\t\t\t\t\t\t\t\tonClick={logoutUser}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tlog out\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t)\r\n}\r\n\r\nexport default Navigation\r\n","import React from 'react'\r\nimport {navigate, Link} from '@reach/router'\r\n\r\n// -- page user lands only when not logged in.\r\nfunction Home({isAuth}) {\r\n\t// -- if there is a user logged in, then go to dashboard\r\n\tif (isAuth) {\r\n\t\tnavigate('/dashboard')\r\n\t}\r\n\r\n\t// -- if there are NO user logged in, the provide these options\r\n\treturn (\r\n\t\t<div className=\"container text-center\">\r\n\t\t\t<div className=\"row justify-content-center\">\r\n\t\t\t\t<div className=\"col-10 col-md-10 col-lg-8 col-xl-7\">\r\n\t\t\t\t\t<div className=\"display-4 text-primary mt-3 mb-2\">Task Dashboard</div>\r\n\t\t\t\t\t<p className=\"lead\">Please login to see your dashboard.</p>\r\n\r\n\t\t\t\t\t<Link to=\"/register\" className=\"btn btn-outline-primary mr-2\">\r\n\t\t\t\t\t\tRegister\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<Link to=\"/login\" className=\"btn btn-outline-primary mr-2\">\r\n\t\t\t\t\t\tLog In\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Home\r\n","import React from 'react'\r\n\r\n// ** make this into a floating modal/toast\r\n\r\nfunction ErrorForm(prop) {\r\n\treturn (\r\n\t\t<div className=\"col-12 alert alert-danger px-3\">{prop.errorMessage}</div>\r\n\t)\r\n}\r\n\r\nexport default ErrorForm\r\n","import firebase from 'firebase/app'\r\n\r\n// Wrapper for Firebase api\r\nexport const signIn = async (email, password) => {\r\n\ttry {\r\n\t\tlet result = await firebase\r\n\t\t\t.auth()\r\n\t\t\t.signInWithEmailAndPassword(email, password)\r\n\t\treturn result\r\n\t} catch (error) {\r\n\t\tthrow new Error('Error signing in')\r\n\t}\r\n}\r\n","import {navigate} from '@reach/router'\r\nimport React, {useState} from 'react'\r\n\r\nimport ErrorForm from '../components/ErrorForm'\r\n\r\nimport {signIn} from '../services/firebaseAuth/signIn'\r\n\r\nfunction Login() {\r\n\tconst [loginUser, changeLoginUser] = useState({\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t\terrorMessage: null,\r\n\t})\r\n\r\n\tfunction handleChange(e) {\r\n\t\tchangeLoginUser({...loginUser, [e.target.name]: e.target.value})\r\n\t}\r\n\r\n\tfunction handleSubmit(e) {\r\n\t\te.preventDefault()\r\n\r\n\t\tsignIn(loginUser.email, loginUser.password)\r\n\t\t\t.then((user) => {\r\n\t\t\t\tif (user) {\r\n\t\t\t\t\t//if the user is not null then\r\n\t\t\t\t\tnavigate('/dashboard')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tif (error.message !== null) {\r\n\t\t\t\t\tchangeLoginUser({...loginUser, errorMessage: error.message})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchangeLoginUser({...loginUser, errorMessage: null})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form className=\"mt-3\" onSubmit={handleSubmit}>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row justify-content-center\">\r\n\t\t\t\t\t<div className=\"col-lg-6\">\r\n\t\t\t\t\t\t<div className=\"card bg-light\">\r\n\t\t\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t\t\t\t<h3 className=\"font-weight-light mb-3\">Log in</h3>\r\n\r\n\t\t\t\t\t\t\t\t{loginUser.errorMessage && (\r\n\t\t\t\t\t\t\t\t\t<ErrorForm errorMessage={loginUser.errorMessage} />\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<section className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<label className=\"form-control-label sr-only\" htmlFor=\"Email\">\r\n\t\t\t\t\t\t\t\t\t\tEmail\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={loginUser.email}\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<section className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={loginUser.password}\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t<div className=\"form-group text-right mb-0\">\r\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">\r\n\t\t\t\t\t\t\t\t\t\tLog in\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t*Note that your login credentials will be remembered on this\r\n\t\t\t\t\t\t\t\t\tbrowser/computer. When using a public computer, please logout\r\n\t\t\t\t\t\t\t\t\tafter completing your updates.\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default Login\r\n","import firebase from 'firebase/app'\r\n\r\n// -- create new userCredentials in Firebase.Auth() and returns the unique id\r\nexport default async function createFBUserWithEmailandPass(email, password) {\r\n\t// -- note that when a user is successfully created, they will automatically be signed in\r\n\ttry {\r\n\t\tconst newUserCredential = await firebase\r\n\t\t\t.auth()\r\n\t\t\t.createUserWithEmailAndPassword(email, password)\r\n\t\treturn newUserCredential.user.uid\r\n\t} catch (error) {\r\n\t\tthrow new Error(error)\r\n\t}\r\n}\r\n","import firebase from 'firebase/app'\r\n\r\n// -- creates a new user doc at the 'users' collection. NOTE if 'users' is the right collection name in the projects when reusing this code.\r\nexport default async function createUserDoc(id, name, email, jobLevel) {\r\n\tconst db = firebase.firestore()\r\n\r\n\tdb.collection('users')\r\n\t\t.doc(id)\r\n\t\t.set({name, email, jobLevel})\r\n\t\t.catch((error) => {\r\n\t\t\tthrow new Error(error.message)\r\n\t\t})\r\n}\r\n","import createFBUserWithEmailandPass from './createFBUserWithEmailandPass'\r\nimport createUserDoc from './createUserDoc'\r\n\r\n// -- takes in one parametre (an object). This object is deconstructed into the following variables\r\nexport default async function registerUser({name, email, jobLevel, password}) {\r\n\ttry {\r\n\t\t// -- create new userCredentials in Firebase.Auth() and return the id\r\n\t\tconst id = await createFBUserWithEmailandPass(email, password)\r\n\t\tawait createUserDoc(id, name, email, jobLevel)\r\n\r\n\t\talert('Registration completed sucessfully')\r\n\t\t// *** forward to modal/toast a success message\r\n\t} catch (error) {\r\n\t\tconsole.log(error.message)\r\n\t\t// *** forward to modal/toast error message\r\n\t}\r\n}\r\n","import React, {useEffect, useState} from 'react'\r\nimport {navigate} from '@reach/router'\r\n\r\nimport registerUser from '../services/user/registerUser'\r\nimport ErrorForm from '../components/ErrorForm'\r\n\r\nfunction Register() {\r\n\tconst [regData, setRegData] = useState({\r\n\t\tname: '',\r\n\t\temail: '',\r\n\t\tjobLevel: '',\r\n\t\tpassOne: '',\r\n\t\tpassTwo: '',\r\n\t})\r\n\r\n\tconst [errorMessage, setErrorMessage] = useState(null)\r\n\r\n\t//checking passwors match\r\n\tuseEffect(() => {\r\n\t\tif (regData.passOne !== regData.passTwo) {\r\n\t\t\tsetErrorMessage('Passwords do not match.')\r\n\t\t} else {\r\n\t\t\tsetErrorMessage(null)\r\n\t\t}\r\n\t}, [regData.passOne, regData.passTwo])\r\n\r\n\tfunction handleChange(e) {\r\n\t\tsetRegData({\r\n\t\t\t...regData,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t})\r\n\t}\r\n\r\n\tasync function handleSubmit(e) {\r\n\t\te.preventDefault()\r\n\r\n\t\t// -- prevent the form submission the 2 passwords doesn't match\r\n\t\tif (regData.passOne !== regData.passTwo) {\r\n\t\t\tsetErrorMessage(\r\n\t\t\t\t'Passwords do not match. Please fix before re-submitting.'\r\n\t\t\t)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet registrationInfo = {\r\n\t\t\tname: regData.name,\r\n\t\t\temail: regData.email,\r\n\t\t\tjobLevel: regData.jobLevel,\r\n\t\t\tpassword: regData.passOne,\r\n\t\t}\r\n\r\n\t\t// -- validation of required field and email syntax is done via htlm code\r\n\t\t// -- validation that there is no duplicate user email is done via firebase.auth()\r\n\t\t// -- validation of minimum required passwordcomplexity is done by firebase.auth()\r\n\t\tawait registerUser(registrationInfo)\r\n\r\n\t\t// -- once registered, the user will be logged in and directed towards the dashboard\r\n\t\tnavigate('/dashboard')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form className=\"mt-3\" onSubmit={handleSubmit}>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row justify-content-center\">\r\n\t\t\t\t\t<div className=\"col-lg-8\">\r\n\t\t\t\t\t\t<div className=\"card bg-light\">\r\n\t\t\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t\t\t\t<h3 className=\"font-weight-light mb-3\">Register</h3>\r\n\t\t\t\t\t\t\t\t<div className=\"form-row\">\r\n\t\t\t\t\t\t\t\t\t{/* *** Feature: make Error Message into modal/toast */}\r\n\t\t\t\t\t\t\t\t\t{errorMessage ? (\r\n\t\t\t\t\t\t\t\t\t\t<ErrorForm errorMessage={errorMessage} />\r\n\t\t\t\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t\t\t\t<section className=\"col-sm-12 form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control-label sr-only\"\r\n\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"name\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tName\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={regData.name}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"form-row\">\r\n\t\t\t\t\t\t\t\t\t<section className=\"col-sm-6 form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control-label sr-only\"\r\n\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tEmail\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email Address\"\r\n\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={regData.email}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t<section className=\"col-sm-6 form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control-label sr-only\"\r\n\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"name\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tJob Level\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"custom-select\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"jobLevel\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"jobLevel\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={regData.jobLevel}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{/* Form is prevented from being submitted when the job level is not selected thanks to the 'required' property above and the value='' below  */}\r\n\t\t\t\t\t\t\t\t\t\t\t<option defaultValue value=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tJob Level...\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"L1\">L1: General Employee</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"L2\">L2: Supervisor</option>\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"form-row\">\r\n\t\t\t\t\t\t\t\t\t<section className=\"col-sm-6 form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"passOne\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={regData.passOne}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t<section className=\"col-sm-6 form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"passTwo\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Repeat Password\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={regData.passTwo}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"form-group text-right mb-0\">\r\n\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">\r\n\t\t\t\t\t\t\t\t\t\tRegister\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default Register\r\n","import React from 'react'\r\nimport {RiFileEditLine} from 'react-icons/ri'\r\nimport {MdArrowDropDownCircle} from 'react-icons/md'\r\nimport {navigate} from '@reach/router'\r\n\r\n// -- This compenent displays a list of tasks from a filtered Array passed on to it from Dashboard\r\nexport default function TasksList({filteredTasksArray}) {\r\n\tif (filteredTasksArray.length === 0) {\r\n\t\treturn <h3>There are currently no task associated with your user name.</h3>\r\n\t}\r\n\r\n\tfunction handleClick(e, taskId) {\r\n\t\te.stopPropagation()\r\n\t\tnavigate('editTask/' + taskId)\r\n\t}\r\n\r\n\tlet myTask = filteredTasksArray.map((task) => {\r\n\t\treturn (\r\n\t\t\t<div className=\"card\" key={task.id}>\r\n\t\t\t\t<div className=\"card-header p-0\" id={task.id}>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"btn btn-block text-left\"\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tdata-toggle=\"collapse\"\r\n\t\t\t\t\t\tdata-target={`#collapse${task.id}`}\r\n\t\t\t\t\t\taria-expanded=\"false\"\r\n\t\t\t\t\t\taria-controls={`collapse${task.id}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"btn btn-lg btn-outline-secondary col-1 p-2\"\r\n\t\t\t\t\t\t\ttitle=\"Click to Edit Task\"\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\thandleClick(e, task.id)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<RiFileEditLine />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<div className=\"btn text-truncate text-nowrap text-left col-10\">\r\n\t\t\t\t\t\t\t{task.taskName}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"btn col-1\">\r\n\t\t\t\t\t\t\t<MdArrowDropDownCircle />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div\r\n\t\t\t\t\tid={`collapse${task.id}`}\r\n\t\t\t\t\tclassName=\"collapse\"\r\n\t\t\t\t\taria-labelledby={task.id}\r\n\t\t\t\t\tdata-parent=\"#taskListaccordion\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"card-body text-left \">\r\n\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t<div className=\"card-title row justify-content-between\">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\tPriority: {task.priority === 'p1' && ' Low'}\r\n\t\t\t\t\t\t\t\t\t{task.priority === 'p2' && ' High'}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span>Due Date: {task.dateDue}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p className=\"card-text\">{task.taskDescription}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t})\r\n\r\n\t// -- NOTE: the class 'accordion' was added below so that only one element is shown while the rest is collapsed. To have multiple tasks elements uncollapsed at the same time, remove the accordion class, and take out the id=\"taskListaccordion\" below as well as the data-parent=\"#taskListaccordion\" in the .map() function\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/* <h1>BELOW IS THE TASK LIST:</h1> */}\r\n\t\t\t<div className=\"accordion\" id=\"taskListaccordion\">\r\n\t\t\t\t{myTask}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n","import firebase from 'firebase/app'\r\n\r\n// Wrapper for Firebase Auth api which returns only the id and email properties. Detailed user info is stored in Firestore under the same user id (see getUserInfo.js)\r\nexport const getCurrentAuthUser = () => {\r\n\tconst user = firebase.auth().currentUser\r\n\tif (!user) {\r\n\t\treturn null // -- return null if no user is logged in\r\n\t} else {\r\n\t\treturn {id: user.uid, email: user.email}\r\n\t}\r\n}\r\n","import {useEffect, useState} from 'react'\r\nimport firebase from 'firebase/app'\r\nimport {getCurrentAuthUser} from '../firebaseAuth/getCurrentAuthUser'\r\n/*\r\nA wrapper API that RETURNS a realtime array of task Objects associated with the currently logged on userId by matching either at nameTaskCreator or nameResponsible\r\n\t\t\t\t\t\t\r\nNOTE refer to the comments in useComments for detail innerworkings of the code below\r\n*/\r\nexport const useTaskList = () => {\r\n\tconst tasksCreator = useUserBelongToTask('nameTaskCreatorId')\r\n\tconst tasksResponsible = useUserBelongToTask('nameResponsibleId')\r\n\tlet finalList = [...tasksCreator, ...tasksResponsible]\r\n\treturn removeDuplicateArr(finalList)\r\n}\r\n\r\n// -- Param userTypeFilter is either 'nameTaskCreatorId' or 'nameResponsibleId'\r\nconst useUserBelongToTask = (userTypeFilter) => {\r\n\tlet userAuthObj = getCurrentAuthUser()\r\n\tconst [tasks, setTasks] = useState([])\r\n\t// -- loading Docs where current userId match the creator field\r\n\tuseEffect(() => {\r\n\t\tlet tasksArray = []\r\n\t\tconst tasksRef = firebase.firestore().collection('tasks')\r\n\t\tconst unsubscribe = tasksRef\r\n\t\t\t.where(userTypeFilter, '==', userAuthObj.id)\r\n\t\t\t.onSnapshot((snapshot) => {\r\n\t\t\t\ttasksArray = snapshot.docs.map((doc) => ({\r\n\t\t\t\t\tid: doc.id,\r\n\t\t\t\t\t...doc.data({serverTimestamps: 'estimate'}),\r\n\t\t\t\t}))\r\n\t\t\t\t// -- convert the Firestore timestamp value to a simplified date STRING of YYYY-MM-DD\r\n\t\t\t\ttasksArray = tasksArray.map((obj) => {\r\n\t\t\t\t\t// -- creates a new Date() from the milliseconds Firestore Timestamp\r\n\t\t\t\t\tlet simpleDate = obj.dateCreated.toDate()\r\n\t\t\t\t\tsimpleDate = simpleDate.toISOString().slice(0, 10)\r\n\t\t\t\t\tobj.dateCreated = simpleDate\r\n\t\t\t\t\t// -- curate what will be returned so we can control future changes better\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid: obj.id,\r\n\t\t\t\t\t\tdateCreated: obj.dateCreated,\r\n\t\t\t\t\t\tdateDue: obj.dateDue,\r\n\t\t\t\t\t\tpriority: obj.priority,\r\n\t\t\t\t\t\tstatus: obj.status,\r\n\t\t\t\t\t\tnameTaskCreator: obj.nameTaskCreator,\r\n\t\t\t\t\t\tnameTaskCreatorId: obj.nameTaskCreatorId,\r\n\t\t\t\t\t\tnameResponsible: obj.nameResponsible,\r\n\t\t\t\t\t\tnameResponsibleId: obj.nameResponsibleId,\r\n\t\t\t\t\t\ttaskName: obj.taskName,\r\n\t\t\t\t\t\ttaskDescription: obj.taskDescription,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tsetTasks(tasksArray)\r\n\t\t\t})\r\n\t\treturn () => unsubscribe()\r\n\t\t// eslint-disable-next-line\r\n\t}, [])\r\n\treturn tasks\r\n}\r\n\r\nfunction removeDuplicateArr(arr) {\r\n\tconst getHash = (item) => item.id\r\n\t// to ensure uniqueness of id\r\n\tconst seenHash = new Set()\r\n\r\n\treturn arr.filter((item) => {\r\n\t\tif (seenHash.has(getHash(item))) {\r\n\t\t\treturn false\r\n\t\t} else {\r\n\t\t\tseenHash.add(getHash(item))\r\n\t\t\treturn true\r\n\t\t}\r\n\t})\r\n}\r\n","/*\r\nReturns true if a string contains anything other than 0-9, a-z (case insensitive), and whitespace.\r\nThis will also accept !(u0021), ?(003F), and .(002E)\r\n*/\r\nexport const containsBadChar = (str) => {\r\n\tvar regex = /[^a-z0-9\\s\\u0021\\u003F\\u002E]/gi\r\n\treturn regex.test(str)\r\n}\r\n","/* \r\nTakes a string and return an array with the space and uppercase addressed */\r\nexport const extractSearchKeywords = (str) => {\r\n\tlet cleanStr = str.trim().toLowerCase()\r\n\t// break multi keywords into array at each space\r\n\tlet searchTermArray = cleanStr.split(' ')\r\n\t// -- remove empty string elements from the array (happens when the user puts multiple spaces between search terms)\r\n\tsearchTermArray = searchTermArray.filter((item) => {\r\n\t\tif (item.length > 0) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t})\r\n\treturn searchTermArray\r\n}\r\n","import {containsBadChar} from '../general/containsBadChar'\r\nimport {extractSearchKeywords} from '../general/extractSearchKeywords'\r\n\r\nexport const filterTask = (taskList, searchCriteria, orderBy) => {\r\n\tlet orderedList = []\r\n\r\n\tswitch (orderBy) {\r\n\t\tcase 'recent':\r\n\t\t\torderedList = orderByRecent(taskList)\r\n\t\t\tbreak\r\n\t\tcase 'dueDate':\r\n\t\t\torderedList = orderByDate(taskList)\r\n\t\t\tbreak\r\n\t\tcase 'priority':\r\n\t\t\torderedList = orderByPriority(taskList)\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tbreak\r\n\t}\r\n\treturn searchByKeyword(orderedList, searchCriteria)\r\n}\r\n\r\n// -- order an Array of objects by the most recently added first (dateCreated)\r\nfunction orderByRecent(taskList) {\r\n\tlet sortArray = taskList.sort((a, b) => {\r\n\t\t// -- sort in ascending order (earlier to later dates)\r\n\t\treturn Date.parse(a.dateCreated) - Date.parse(b.dateCreated)\r\n\t\t/*\r\n\t\tNOTE: I am using Date.parse to be quick and dirty. Risk: There are still many differences in how different hosts parse date strings.\r\n\t\thttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse\r\n\t\t\r\n\t\tThe Firestore timestamp dateCreated property in the var taskList was converted to a simple date STRING. As such, ordering tasks created on the same day will not exact.\r\n\t\t*/\r\n\t})\r\n\treturn sortArray\r\n}\r\n// -- order an Array of objects by the dateDue key\r\nfunction orderByDate(taskList) {\r\n\tlet sortArray = taskList.sort((a, b) => {\r\n\t\t// -- sort in ascending order (earlier to later dates)\r\n\t\treturn Date.parse(a.dateDue) - Date.parse(b.dateDue)\r\n\t\t// -- sort in descending order (later to earlier dates)\r\n\t\t// return Date.parse(b.dateDue) - Date.parse(a.dateDue)\r\n\t})\r\n\treturn sortArray\r\n}\r\n// -- order an Array of objects by the priority key\r\nfunction orderByPriority(taskList) {\r\n\tlet p1Array = taskList.filter((elt) => {\r\n\t\treturn elt.priority === 'p1'\r\n\t})\r\n\tlet p2Array = taskList.filter((elt) => {\r\n\t\treturn elt.priority === 'p2'\r\n\t})\r\n\t// -- then order by due date closest 1st\r\n\treturn [...orderByDate(p2Array), ...orderByDate(p1Array)]\r\n}\r\n// -- order an Array of objects keywords\r\nfunction searchByKeyword(taskList, searchCriteria = '') {\r\n\tlet searchTermArray = []\r\n\tlet results = []\r\n\t// -- just return the whole list if there are no search criteria\r\n\tif (searchCriteria.length === 0) return taskList\r\n\t// -- make sure that the search string is sanatized\r\n\tif (containsBadChar(searchCriteria)) {\r\n\t\t// *** implement a toast/modal for this error notification\r\n\t\tconsole.error('This field only accepts letters, digits, and spaces')\r\n\t} else {\r\n\t\tsearchTermArray = extractSearchKeywords(searchCriteria)\r\n\r\n\t\tresults = taskList.filter((task) => {\r\n\t\t\t/*\r\n\t\t\tfor each keyword in the searchTermArray search in task.taskName and task.taskDescription to see if there is a match\r\n\t\t\tstop seach and return false if any keyword is not found in both taskName and taskDescription\r\n\t\t\t*/\r\n\t\t\tfor (const keyword of searchTermArray) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!task.taskName.toLowerCase().includes(keyword) &&\r\n\t\t\t\t\t!task.taskDescription.toLowerCase().includes(keyword)\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t}\r\n\treturn results\r\n}\r\n","import React, {useState} from 'react'\r\nimport TasksList from '../components/TasksList'\r\nimport {navigate} from '@reach/router'\r\nimport {useTaskList} from '../services/task/useTaskList'\r\nimport {filterTask} from '../services/task/filterTask'\r\n\r\nexport default function DashboardPage() {\r\n\t// *** implement pagination, so only top 10 records gets shown until user scroll further down or request more https://www.youtube.com/watch?v=poqTHxtDXwU&list=PLl-K7zZEsYLluG5MCVEzXAQ7ACZBCuZgZ&index=7\r\n\r\n\tconst [orderBy, setOrderby] = useState('recent')\r\n\tconst [searchCriteria, setSearchCriteria] = useState('')\r\n\tlet taskList = useTaskList()\r\n\tlet filteredTasksArray = []\r\n\tif (taskList.length !== 0 && taskList !== undefined && taskList !== null) {\r\n\t\tfilteredTasksArray = filterTask(taskList, searchCriteria, orderBy)\r\n\t}\r\n\tfunction handleClick(e) {\r\n\t\te.preventDefault()\r\n\t\tnavigate('editTask')\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"container text-center\">\r\n\t\t\t\t<div className=\"row justify-content-center\">\r\n\t\t\t\t\t<div className=\"col-10 col-md-10 col-lg-8 col-xl-7\">\r\n\t\t\t\t\t\t<div className=\"display-4 text-primary mt-3 mb-2\">\r\n\t\t\t\t\t\t\tTask Dashboard\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"btn btn-secondary mt-4 mb-2\"\r\n\t\t\t\t\t\t\tonClick={handleClick}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tCreate New Task\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<div className=\"input-group mb-1\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\taria-label=\"Text input with dropdown button\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Enter search keywords...\"\r\n\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\tvalue={searchCriteria}\r\n\t\t\t\t\t\t\t\tonChange={(e) => setSearchCriteria(e.target.value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"Query Type Label\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control text-center col-lg-3\"\r\n\t\t\t\t\t\t\t\taria-label=\"\"\r\n\t\t\t\t\t\t\t\tvalue=\"Order Search by:\"\r\n\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tclassName=\"custom-select col-lg-3\"\r\n\t\t\t\t\t\t\t\tname=\"orderBy\"\r\n\t\t\t\t\t\t\t\tvalue={orderBy}\r\n\t\t\t\t\t\t\t\tonChange={(e) => setOrderby(e.target.value)}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<option value=\"recent\" defaultValue>\r\n\t\t\t\t\t\t\t\t\tRecently Added\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t<option value=\"dueDate\">Due Date</option>\r\n\t\t\t\t\t\t\t\t<option value=\"priority\">Priority</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<TasksList filteredTasksArray={filteredTasksArray} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n","import firebase from 'firebase/app'\r\nconst db = firebase.firestore()\r\n\r\n// -- Returns all of a user's details in Firestore doc given an id\r\nexport const getUserInfo = async (userId) => {\r\n\tif (userId === null) return null // -- handle the improbably situation where userId is null\r\n\r\n\tconst docReference = db.collection('users').doc(userId)\r\n\tconst docSnapShot = await docReference.get()\r\n\r\n\tif (!docSnapShot.exists) {\r\n\t\treturn null // we are saying to explicitely return null since userInfo is 'undefined' if no doc found\r\n\t}\r\n\r\n\tconst docData = docSnapShot.data()\r\n\r\n\treturn {...docData, id: userId} // -- adds id key because docData does not contain the id directly\r\n}\r\n","import {getCurrentAuthUser} from '../firebaseAuth/getCurrentAuthUser'\r\nimport {getUserInfo} from './getUserInfo'\r\n\r\n// -- returns the currently logged in user's info from the Firestore 'users' collection\r\n// -- returns Null if not logged in\r\n\r\nexport const getCurrentUserInfo = async () => {\r\n\tconst userAuthObj = getCurrentAuthUser()\r\n\r\n\tif (!userAuthObj) {\r\n\t\treturn null\r\n\t} else {\r\n\t\tconst userObj = await getUserInfo(userAuthObj.id)\r\n\t\treturn userObj\r\n\t}\r\n}\r\n","import firebase from 'firebase/app'\r\n\r\n/*\r\nWrapper for Firebase API to get a task document\r\nReturns an object with all the fields of a task for a given taskId || undefined if no record match taskId (not likely scenario, maybe when connectino is lost?)\r\n\r\nEach task in the talk arrray is {dateCreated, dateDue, nameResponsible, nameResponsibleId, nameTaskCreator, nameTaskCreatorId, priority, status, taskDescription, taskName}\r\n*/\r\nexport default async function getTaskObj(taskId) {\r\n\tconst taskRef = firebase.firestore().collection('tasks').doc(taskId)\r\n\tconst docRef = await taskRef.get()\r\n\tconst obj = docRef.data()\r\n\r\n\t// -- convert the Firestore timestamp value to a simplified date STRING of YYYY-MM-DD\r\n\tlet simpleDate = obj.dateCreated.toDate() // -- creates a new Date() from the milliseconds\r\n\tsimpleDate = simpleDate.toISOString().slice(0, 10)\r\n\r\n\t// -- curate what will be returned so we can control future changes better\r\n\treturn {\r\n\t\tid: taskId,\r\n\t\tdateCreated: simpleDate,\r\n\t\tdateDue: obj.dateDue,\r\n\t\tpriority: obj.priority,\r\n\t\tstatus: obj.status,\r\n\t\tnameResponsible: obj.nameResponsible,\r\n\t\tnameResponsibleId: obj.nameResponsibleId,\r\n\t\tnameTaskCreator: obj.nameTaskCreator,\r\n\t\tnameTaskCreatorId: obj.nameTaskCreatorId,\r\n\t\ttaskDescription: obj.taskDescription,\r\n\t\ttaskName: obj.taskName,\r\n\t}\r\n}\r\n","import {useState, useEffect} from 'react'\r\nimport firebase from 'firebase/app'\r\n\r\n/*\r\nuseEmployeeList is a custom React Hook.\r\nparams: jobLevel is string L1 or L2\r\nreturns a realtime array of employees at the JOBLEVEL 1\r\n*/\r\nexport default function useEmployeeList(jobLevel) {\r\n\tconst [employees, setEmployees] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst usersRef = firebase.firestore().collection('users')\r\n\r\n\t\tconst unsubscribe = usersRef\r\n\t\t\t.where('jobLevel', '==', jobLevel)\r\n\t\t\t.orderBy('name', 'asc')\r\n\t\t\t.onSnapshot(\r\n\t\t\t\t(snapshot) => {\r\n\t\t\t\t\tconst usersArray = snapshot.docs.map((doc) => ({\r\n\t\t\t\t\t\tid: doc.id,\r\n\t\t\t\t\t\t...doc.data(),\r\n\t\t\t\t\t}))\r\n\t\t\t\t\tsetEmployees(usersArray)\r\n\t\t\t\t},\r\n\t\t\t\t(error) => {\r\n\t\t\t\t\tthrow new Error('Error: ' + error.message)\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\treturn () => unsubscribe()\r\n\t\t// eslint-disable-next-line\r\n\t}, [])\r\n\r\n\treturn employees // -- an array of users objects with all the key value pairs, including the doc id. The doc.id will be used as the element's unique key when rendering the React component\r\n}\r\n","import firebase from 'firebase/app'\r\n\r\n// -- wrapper to firebase for adding an object and returning the object with the newly created id\r\nexport default async function addTask(taskObj) {\r\n\tconst tasksRef = firebase.firestore().collection('tasks')\r\n\r\n\ttry {\r\n\t\tconst docRef = await tasksRef.add(taskObj)\r\n\t\tconst docSnap = await docRef.get()\r\n\t\treturn {id: docRef.id, ...docSnap.data()} // -- returns the id with the data\r\n\t} catch (error) {\r\n\t\talert(error.message)\r\n\t\tthrow new Error(error)\r\n\t}\r\n}\r\n","import firebase from 'firebase/app'\r\n\r\n// -- wrapper to firebase for updating a task\r\nexport default async function updateTask(taskId, taskObj) {\r\n\t// -- NOTE: ensures that the timestamp is not overwritten\r\n\tdelete taskObj.dateCreated\r\n\r\n\tconst tasksRef = firebase.firestore().collection('tasks').doc(taskId)\r\n\ttry {\r\n\t\tawait tasksRef.update(taskObj)\r\n\t\treturn true\r\n\t} catch (error) {\r\n\t\talert(error.message)\r\n\t\tthrow new Error('Could not update the Task. Please contact Helpdesk.')\r\n\t}\r\n}\r\n","import firebase from 'firebase/app'\r\n\r\n// -- function adds a new comment document under the task collection and comments subcollection\r\n// -- returns the id of the new comment doc. This return value is currently not used\r\nexport default async function addComment(taskId, comment, userObj) {\r\n\tconst collectionRef = firebase\r\n\t\t.firestore()\r\n\t\t.collection('tasks')\r\n\t\t.doc(taskId)\r\n\t\t.collection('comments')\r\n\r\n\ttry {\r\n\t\t// -- comment doc's fields will not be atomized in order to save on extra query search. Both the username and email will be save in the comment doc. The username and email can be retrieved using the userId, but that requires an extra querying step, which neans more $.\r\n\t\tlet newDocRef = await collectionRef.add({\r\n\t\t\tcomment,\r\n\t\t\tname: userObj.name,\r\n\t\t\tuserId: userObj.id,\r\n\t\t\temail: userObj.email,\r\n\t\t\ttimestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t})\r\n\t\treturn newDocRef.id // -- returns the id of the newly added comment\r\n\t} catch (error) {\r\n\t\talert('Errow with saving the comment: ' + error.message)\r\n\t}\r\n}\r\n","// *** dynamic list of jobLevel 1 for the dropdown menu is further filtered by department (but this is for future improvements / production version)\r\n// *** provide more detail of what was modified for Auto Messages when updating tasks\r\nimport React, {useEffect, useState} from 'react'\r\nimport firebase from 'firebase/app'\r\nimport {navigate} from '@reach/router'\r\n\r\nimport {getCurrentUserInfo} from '../services/user/getCurrentUserInfo'\r\nimport getTaskObj from '../services/task/getTaskObj'\r\nimport useEmployeeList from '../services/task/useEmployeeList'\r\nimport addTask from '../services/task/addTask'\r\nimport updateTask from '../services/task/updateTask'\r\nimport addComment from '../services/task/addComment'\r\nimport {containsBadChar} from '../services/general/containsBadChar'\r\n\r\nexport default function TaskForm({taskId = null}) {\r\n\tconst [userObj, setuserObj] = useState({})\r\n\r\n\tconst [taskObj, setTaskObj] = useState({\r\n\t\tpriority: '',\r\n\t\tstatus: '',\r\n\t\tdateDue: '',\r\n\t\tnameResponsible: '',\r\n\t\tnameResponsibleId: '',\r\n\t\ttaskName: '',\r\n\t\ttaskDescription: '',\r\n\t})\r\n\t// -- used to keep track if the data has been changed\r\n\tconst [existingTaskObj, setExistingTaskObj] = useState({\r\n\t\tpriority: '',\r\n\t\tstatus: '',\r\n\t\tdateDue: '',\r\n\t\tnameResponsible: '',\r\n\t\tnameResponsibleId: '',\r\n\t\ttaskName: '',\r\n\t\ttaskDescription: '',\r\n\t})\r\n\t// -- these presets are for fields not to be modified once the task is created\r\n\tconst [taskObjPresets, setTaskObjPresets] = useState({\r\n\t\tdateCreated: '',\r\n\t\tnameTaskCreator: '',\r\n\t\tnameTaskCreatorId: '',\r\n\t})\r\n\t// -- load employee list for dropdown menu\r\n\t// -- currently allowing the task creator to assign themselves as the one responsible\r\n\tlet employeeL1List = useEmployeeList('L1').map((item) => {\r\n\t\treturn (\r\n\t\t\t<option key={item.id} data-key={item.id} value={item.name}>\r\n\t\t\t\t{item.name}\r\n\t\t\t</option>\r\n\t\t)\r\n\t})\r\n\tlet employeeL2List = useEmployeeList('L2').map((item) => {\r\n\t\treturn (\r\n\t\t\t<option key={item.id} data-key={item.id} value={item.name}>\r\n\t\t\t\t{item.name}\r\n\t\t\t</option>\r\n\t\t)\r\n\t})\r\n\t// Load the currently logged user info\r\n\tuseEffect(() => {\r\n\t\tconst userObj = async () => {\r\n\t\t\tconst data = await getCurrentUserInfo()\r\n\t\t\tsetuserObj(data)\r\n\t\t}\r\n\t\tuserObj()\r\n\t\t// -- since getCurrentUserInfo() is async, it will constantly cycle from a promise to fullfilled everytime it is called. As such, I am using the empty [] to only do this action once when the component mounts. Furthermore, getCurrentUserInfo() should not changed while the component is mounted.\r\n\t}, [])\r\n\t// -- NEW task - set by default the status to be 'in progress'\r\n\tuseEffect(() => {\r\n\t\tif (taskId === null) {\r\n\t\t\t// -- automatically set the status to be s1: in progress when creating a new task\r\n\t\t\tsetTaskObj((old) => ({...old, status: 's1'}))\r\n\t\t}\r\n\t}, [taskId])\r\n\t// -- EXISTING task - set taskObj to the task info\r\n\tuseEffect(() => {\r\n\t\tif (taskId !== null) {\r\n\t\t\tasync function getTaskandSet() {\r\n\t\t\t\tconst taskInfo = await getTaskObj(taskId)\r\n\t\t\t\tsetTaskObjPresets({\r\n\t\t\t\t\tdateCreated: taskInfo.dateCreated,\r\n\t\t\t\t\tnameTaskCreator: taskInfo.nameTaskCreator,\r\n\t\t\t\t\tnameTaskCreatorId: taskInfo.nameTaskCreatorId,\r\n\t\t\t\t})\r\n\t\t\t\t// -- stripout these properties before setting the state for the following\r\n\t\t\t\tdelete taskInfo.dateCreated\r\n\t\t\t\tdelete taskInfo.nameTaskCreator\r\n\t\t\t\tdelete taskInfo.nameTaskCreatorId\r\n\t\t\t\tsetTaskObj({...taskInfo})\r\n\t\t\t\tsetExistingTaskObj({...taskInfo})\r\n\t\t\t}\r\n\t\t\tgetTaskandSet()\r\n\t\t}\r\n\t}, [taskId])\r\n\t// -- deactivate fields based on job level\r\n\t// *** Also need to implement security redundancy on the server side with security rules (else user can remove the disabled attribute in the browser and submit unauthorized datafields )\r\n\tuseEffect(() => {\r\n\t\tlet securedElements = document.querySelectorAll('[data-secured]')\r\n\t\tif (taskId !== null && userObj.jobLevel === 'L1') {\r\n\t\t\tfor (const item of securedElements) {\r\n\t\t\t\titem.attributes.setNamedItem(document.createAttribute('disabled'))\r\n\t\t\t}\r\n\t\t}\r\n\t}, [taskId, userObj])\r\n\t// -- set colour of the dropdown menus\r\n\tuseEffect(() => {\r\n\t\tlet priorityMenus = document.querySelectorAll('.priority')\r\n\t\tfor (const item of priorityMenus) {\r\n\t\t\tchangeMenuColor(item)\r\n\t\t}\r\n\t\tlet statusMenus = document.querySelectorAll('.status')\r\n\t\tfor (const item of statusMenus) {\r\n\t\t\tchangeMenuColor(item)\r\n\t\t}\r\n\t}, [taskObj])\r\n\t// -- Activate/Deactivate submit button by checking if the user changed the initial information\r\n\tuseEffect(() => {\r\n\t\tconst buttonRef = document.querySelector('#submitButton')\r\n\t\tif (\r\n\t\t\t// -- taskName, dateCreated, nameTaskCreator will not change once a task is created, so no need to detect changes\r\n\t\t\ttaskObj.status === existingTaskObj.status &&\r\n\t\t\ttaskObj.priority === existingTaskObj.priority &&\r\n\t\t\ttaskObj.dateDue === existingTaskObj.dateDue &&\r\n\t\t\ttaskObj.nameResponsible === existingTaskObj.nameResponsible &&\r\n\t\t\ttaskObj.taskName === existingTaskObj.taskName &&\r\n\t\t\ttaskObj.taskDescription === existingTaskObj.taskDescription\r\n\t\t) {\r\n\t\t\t// -- assigned the 'disabled' attribute to the button element\r\n\t\t\tbuttonRef.attributes.setNamedItem(document.createAttribute('disabled'))\r\n\t\t} else {\r\n\t\t\tif (buttonRef.hasAttribute('disabled')) {\r\n\t\t\t\tbuttonRef.attributes.removeNamedItem('disabled')\r\n\t\t\t}\r\n\t\t}\r\n\t}, [taskObj, existingTaskObj])\r\n\r\n\tfunction handleChange(e) {\r\n\t\tsetTaskObj({...taskObj, [e.target.name]: e.target.value})\r\n\t}\r\n\tfunction handleResponsibleNameChange(e) {\r\n\t\t// -- gets the index of the targeted option in the dropdown\r\n\t\tconst selectedIndex = e.target.options.selectedIndex\r\n\t\t// -- get the key at the selected option data-set\r\n\t\tconst responsibleUserId = e.target.options[selectedIndex].getAttribute(\r\n\t\t\t'data-key'\r\n\t\t)\r\n\t\tsetTaskObj({\r\n\t\t\t...taskObj,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t\tnameResponsibleId: responsibleUserId,\r\n\t\t})\r\n\t}\r\n\tfunction handlePriorityChange(e) {\r\n\t\thandleChange(e)\r\n\t\tchangeMenuColor(e.target)\r\n\t}\r\n\tfunction handleStatusChange(e) {\r\n\t\thandleChange(e)\r\n\t\tchangeMenuColor(e.target)\r\n\t}\r\n\t// -- change the menu color based on the selection\r\n\tfunction changeMenuColor(htmlElement) {\r\n\t\tswitch (htmlElement.value) {\r\n\t\t\t// -- '' is for all menus (Default case when there is no value selected in the drop down menu)\r\n\t\t\tcase '':\r\n\t\t\t\thtmlElement.setAttribute('style', 'background-color:white; color:black')\r\n\t\t\t\tbreak\r\n\t\t\t// -- for the 'priority' menus\r\n\t\t\tcase 'p1':\r\n\t\t\t\thtmlElement.setAttribute(\r\n\t\t\t\t\t'style',\r\n\t\t\t\t\t'background-color:yellow; color:black'\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'p2':\r\n\t\t\t\thtmlElement.setAttribute(\r\n\t\t\t\t\t'style',\r\n\t\t\t\t\t'background-color:orange; color:white'\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\t// -- for the 'status' menus\r\n\t\t\tcase 's1':\r\n\t\t\t\thtmlElement.setAttribute('style', 'background-color:green; color:white')\r\n\t\t\t\tbreak\r\n\t\t\tcase 's2':\r\n\t\t\t\thtmlElement.setAttribute('style', 'background-color:gray; color:black')\r\n\t\t\t\tbreak\r\n\t\t\tcase 's3':\r\n\t\t\t\thtmlElement.setAttribute('style', 'background-color:black; color:white')\r\n\t\t\t\tbreak\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\tasync function handleSubmit(e) {\r\n\t\te.preventDefault()\r\n\t\t// -- if creating a new task\r\n\t\tif (taskId === null) {\r\n\t\t\t//data validation before upload to firestore\r\n\t\t\tif (\r\n\t\t\t\tcontainsBadChar(taskObj.taskName) ||\r\n\t\t\t\tcontainsBadChar(taskObj.taskDescription)\r\n\t\t\t) {\r\n\t\t\t\t// *** update this error message into a toast\r\n\t\t\t\tconsole.error(\r\n\t\t\t\t\t'Comments cannot contain special characters. Please only use numbers and letters. Space, periods, exclamation points, and question marks are okay. Please remove the special characters before saving'\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\t// -- once data validaitno is passed\r\n\t\t\t\tlet newTask = await addTask({\r\n\t\t\t\t\t...taskObj,\r\n\t\t\t\t\tnameTaskCreator: userObj.name, //-- name is entered directly along side the userId, so that we don't have to do another query to look up the name from the user id\r\n\t\t\t\t\tnameTaskCreatorId: userObj.id,\r\n\t\t\t\t\tdateCreated: firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t\t\t})\r\n\t\t\t\t// -- auto generate comment about task created by so and so\r\n\t\t\t\tautoCommentBot(newTask.id, 'Auto Message: Task is created')\r\n\r\n\t\t\t\talert('New task is saved') // *** make this into a toast/modal\r\n\t\t\t\tnavigate('../dashboard')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// UPDATING a task\r\n\r\n\t\t\t//data validation before upload to firestore\r\n\t\t\tif (\r\n\t\t\t\tcontainsBadChar(taskObj.taskName) ||\r\n\t\t\t\tcontainsBadChar(taskObj.taskDescription)\r\n\t\t\t) {\r\n\t\t\t\t// *** update this error message into a toast\r\n\t\t\t\tconsole.error(\r\n\t\t\t\t\t'Comments cannot contain special characters. Please only use numbers and letters. Space, periods, exclamation points, and question marks are okay. Please remove the special characters before saving'\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tlet result = await updateTask(taskId, taskObj)\r\n\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\t// -- auto generate comment about task created by so and so\r\n\t\t\t\t\tautoCommentBot(taskId, 'Auto Message: Task was modified')\r\n\r\n\t\t\t\t\talert('Task is updated') // *** make this into a toast/modal\r\n\t\t\t\t\t// -- don't navigate away as the user may edit further information\r\n\r\n\t\t\t\t\t// -- Once setExistingTaskObj is triggered, the useEffect to Activate/Deactivate kicks in and disables the button agai\r\n\t\t\t\t\tsetExistingTaskObj(taskObj)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tasync function autoCommentBot(taskId, newComment) {\r\n\t\ttry {\r\n\t\t\tconst userObj = await getCurrentUserInfo() // -- returns Null if no user is logged in\r\n\t\t\t// -- checks if user exits, or else something is wrong with the connection\r\n\t\t\tif (!userObj) {\r\n\t\t\t\t// -- execute this if userObj is Null\r\n\t\t\t\tthrow new Error('User information cannot be verified')\r\n\t\t\t}\r\n\t\t\tawait addComment(taskId, newComment, userObj) // -- currentlyLoggedInUser is an object with the key id, name, email\r\n\t\t} catch (error) {\r\n\t\t\talert(error.message)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/* display of heading will depend of status of taskId */}\r\n\t\t\t{taskId === null && <h1>Create a New Task</h1>}\r\n\t\t\t{taskId !== null && <h1>Update the Task</h1>}\r\n\r\n\t\t\t<form className=\"border p-2\" onSubmit={handleSubmit}>\r\n\t\t\t\t<div className=\"form-row\">\r\n\t\t\t\t\t<div className=\"form-group col-md-3\">\r\n\t\t\t\t\t\t<label className=\"form-control-label\" htmlFor=\"priority\">\r\n\t\t\t\t\t\t\tPriority Level:\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"custom-select priority\"\r\n\t\t\t\t\t\t\tname=\"priority\"\r\n\t\t\t\t\t\t\tvalue={taskObj.priority}\r\n\t\t\t\t\t\t\tonChange={handlePriorityChange}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option defaultValue className=\"priority\" value=\"\">\r\n\t\t\t\t\t\t\t\tPriority...\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option value=\"p1\" className=\"priority\">\r\n\t\t\t\t\t\t\t\tLow\r\n\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t<option value=\"p2\" className=\"priority\">\r\n\t\t\t\t\t\t\t\tHigh\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group col-md-3\">\r\n\t\t\t\t\t\t<label className=\"form-control-label\" htmlFor=\"dateDue\">\r\n\t\t\t\t\t\t\tDeadline:\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tid=\"dateDue\"\r\n\t\t\t\t\t\t\tplaceholder=\"Select Task Deadline...\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tname=\"dateDue\"\r\n\t\t\t\t\t\t\tdata-secured\r\n\t\t\t\t\t\t\tvalue={taskObj.dateDue}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group col-md-6\">\r\n\t\t\t\t\t\t{/* only L1 users can appear here */}\r\n\t\t\t\t\t\t<label className=\"form-control-label\" htmlFor=\"nameResponsible\">\r\n\t\t\t\t\t\t\tResponsible Employee\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"custom-select\"\r\n\t\t\t\t\t\t\tname=\"nameResponsible\"\r\n\t\t\t\t\t\t\tid=\"nameResponsible\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tdata-secured\r\n\t\t\t\t\t\t\tvalue={taskObj.nameResponsible}\r\n\t\t\t\t\t\t\tonChange={handleResponsibleNameChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"\" defaultValue disabled hidden>\r\n\t\t\t\t\t\t\t\tSelect Responsible Employee\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<optgroup label=\"L1 General Employees:\">\r\n\t\t\t\t\t\t\t\t{employeeL1List}\r\n\t\t\t\t\t\t\t</optgroup>\r\n\t\t\t\t\t\t\t<optgroup label=\"L2 Supervisor Level:\">{employeeL2List}</optgroup>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"form-row\">\r\n\t\t\t\t\t<div className=\"form-group col-md-3\">\r\n\t\t\t\t\t\t<label className=\"form-control-label \" htmlFor=\"status\">\r\n\t\t\t\t\t\t\tTask Status:\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"custom-select status\"\r\n\t\t\t\t\t\t\tname=\"status\"\r\n\t\t\t\t\t\t\tid=\"status\"\r\n\t\t\t\t\t\t\tvalue={taskObj.status}\r\n\t\t\t\t\t\t\tonChange={handleStatusChange}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option defaultValue className=\"status\" value=\"\">\r\n\t\t\t\t\t\t\t\tStatus...\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option className=\"status\" value=\"s1\">\r\n\t\t\t\t\t\t\t\tIn Progress\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option className=\"status\" value=\"s2\">\r\n\t\t\t\t\t\t\t\tClosing\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option className=\"status\" value=\"s3\">\r\n\t\t\t\t\t\t\t\tArchived\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group col-md-3\">\r\n\t\t\t\t\t\t{/* only show when the taskId is NOT null (i.e. editing an existing task) */}\r\n\t\t\t\t\t\t{taskId !== null && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<label className=\"form-control-label\" htmlFor=\"dateCreated\">\r\n\t\t\t\t\t\t\t\t\tDate Created:\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\t\t\tid=\"dateCreated\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Loading...\"\r\n\t\t\t\t\t\t\t\t\tname=\"dateCreated\"\r\n\t\t\t\t\t\t\t\t\tvalue={taskObjPresets.dateCreated}\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group col-md-6\">\r\n\t\t\t\t\t\t{taskId !== null && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<label className=\"form-control-label\" htmlFor=\"nameTaskCreator\">\r\n\t\t\t\t\t\t\t\t\tTask Creator\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tid=\"nameTaskCreator\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Leader's Name\"\r\n\t\t\t\t\t\t\t\t\tname=\"nameTaskCreator\"\r\n\t\t\t\t\t\t\t\t\tvalue={taskObjPresets.nameTaskCreator}\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<label className=\"form-control-label\" htmlFor=\"taskName\">\r\n\t\t\t\t\tTask Name:\r\n\t\t\t\t</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tid=\"taskName\"\r\n\t\t\t\t\tplaceholder=\"Enter Task Name...\"\r\n\t\t\t\t\tname=\"taskName\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tdata-secured\r\n\t\t\t\t\tvalue={taskObj.taskName}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t/>\r\n\t\t\t\t<label className=\"form-control-label\" htmlFor=\"taskDescription\">\r\n\t\t\t\t\tTask Description:\r\n\t\t\t\t</label>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\tname=\"taskDescription\"\r\n\t\t\t\t\tid=\"taskDescription\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tplaceholder=\"Enter Task Description...\"\r\n\t\t\t\t\tvalue={taskObj.taskDescription}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\trows=\"5\"\r\n\t\t\t\t></textarea>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tid=\"submitButton\"\r\n\t\t\t\t\tclassName=\"btn btn-primary mt-2\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{taskId === null && 'Create Task'}\r\n\t\t\t\t\t{taskId !== null && 'Update Task'}\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport useComments from '../services/task/useComments'\r\n\r\nexport default function CommentsList({taskId}) {\r\n\tconst commentsArray = useComments(taskId) // -- returns an array of comment objects\r\n\r\n\tlet commentJSX = commentsArray.map((comment) => {\r\n\t\t// -- each comment object has to have at least the following keyss: id, timestamp, description, userId, name, email\r\n\t\treturn (\r\n\t\t\t<li className=\"list-group-item list-group-item-action\" key={comment.id}>\r\n\t\t\t\t<div className=\"d-flex w-100 justify-content-between\">\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tclassName=\"mb-1\"\r\n\t\t\t\t\t\thref={`mailto:${comment.email}?subject=taskId:${taskId}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<small>{comment.name}</small>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<small className=\"text-muted\">\r\n\t\t\t\t\t\t{comment.timestamp.toDate().toDateString()}\r\n\t\t\t\t\t</small>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"text-muted\">{comment.comment}</div>\r\n\t\t\t</li>\r\n\t\t)\r\n\t})\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ul className=\"list-group\">{commentJSX}</ul>\r\n\t\t</>\r\n\t)\r\n}\r\n","import {useState, useEffect} from 'react'\r\nimport firebase from 'firebase/app'\r\n\r\n/*\r\nuseComments is a custom React Hook.\r\n\r\nBelow is taken from the react website: https://reactjs.org/docs/hooks-custom.html\r\nTo share stateful logic between two or more JavaScript functions, we extract it to a third function. Both components and Hooks are functions, so this works for them too!\r\nA custom Hook is a JavaScript function whose name starts with ”use” and that may call other Hooks.\r\n*/\r\n\r\n// -- returns an array of comments for a given taskId\r\n// -- using the prefix of 'use' in front of the function name is important to identify it as a custom hook\r\nexport default function useComments(taskId) {\r\n\tconst [comments, setComments] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst commentsRef = firebase\r\n\t\t\t.firestore()\r\n\t\t\t.collection('tasks')\r\n\t\t\t.doc(taskId)\r\n\t\t\t.collection('comments') // comments is a subcollection of each task document\r\n\t\tconst unsubscribe = commentsRef.orderBy('timestamp', 'desc').onSnapshot(\r\n\t\t\t(snapshot) => {\r\n\t\t\t\t/* \r\n\t\t\t\t-- Learning from article https://medium.com/firebase-developers/the-secrets-of-firestore-fieldvalue-servertimestamp-revealed-29dd7a38a82b\r\n\t\t\t\t-- NOTE: this onSnapshot listener is triggered before the timestamp is written to the server (causing the property timestame to be null). It is then trigerred again with the actual server timestamp once written to the server. However, the app may hang on the 1st 'null' trigger. We can address by putting the data option as so: doc.data({serverTimestamps: 'estimate'}) THIS IS THE METHOD WE WILL USE IN THIS APP.\r\n\t\t\t\t */\r\n\t\t\t\tconst commentsArray = snapshot.docs.map((doc) => ({\r\n\t\t\t\t\tid: doc.id,\r\n\t\t\t\t\t...doc.data({serverTimestamps: 'estimate'}),\r\n\t\t\t\t}))\r\n\t\t\t\tsetComments(commentsArray) // -- NOTE this setComments seems to need to be called inside the onSnapshot callback. Defining a var 1 layer up and setting the value outside and at the end of this callback function gets tricky\r\n\t\t\t\t/*\r\n\t\t\t\t// -- The other options is to use the metadata associated with the DocumentSnapshot delivered to the listener:\r\n\t\t\t\tconst commentsArray = snapshot.docs.map((doc) => {\r\n\t\t\t\t\tif (doc) {\r\n\t\t\t\t\t\tif (!doc.data().timestamp && doc.metadata.hasPendingWrites) {\r\n\t\t\t\t\t\t\tconsole.log('Warning: doc has pending writes')\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...doc.data(),\r\n\t\t\t\t\t\t\t\tid: doc.id,\r\n\t\t\t\t\t\t\t\ttimestamp: firebase.firestore.Timestamp.now(),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// now we have the final timestamp value\r\n\t\t\t\t\t\t\treturn {id: doc.id, ...doc.data()}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tsetComments(commentsArray)\r\n\t\t\t\t*/\r\n\t\t\t},\r\n\t\t\t(error) => {\r\n\t\t\t\tthrow new Error('Error: ' + error.message)\r\n\t\t\t}\r\n\t\t)\r\n\t\treturn () => unsubscribe()\r\n\t\t// -- the return function activates when the componentWillUnmount, which is to clean up (unsubscribe) to the onSnapshot listener\r\n\t}, [taskId])\r\n\r\n\treturn comments // -- an array of comment objects with all the key value pairs, including the doc id. The doc.id will be used as the element's unique key when rendering the React component\r\n}\r\n","import React, {useState} from 'react'\r\n\r\nimport CommentsList from '../components/CommentsList'\r\nimport {getCurrentUserInfo} from '../services/user/getCurrentUserInfo'\r\nimport addComment from '../services/task/addComment'\r\nimport {containsBadChar} from '../services/general/containsBadChar'\r\n\r\nexport default function CommentsSection({taskId}) {\r\n\tconst [newComment, setNewComment] = useState('')\r\n\r\n\tfunction handleChange(e) {\r\n\t\te.preventDefault()\r\n\t\tsetNewComment(e.target.value)\r\n\t}\r\n\r\n\tasync function handleSubmit(e) {\r\n\t\te.preventDefault() // -- prevents reloading when the 'enter' key is pressed when typing in the input field\r\n\t\ttry {\r\n\t\t\tconst userObj = await getCurrentUserInfo() // -- returns Null if no user is logged in\r\n\r\n\t\t\tif (!userObj) {\r\n\t\t\t\t// -- execute this if userObj is Null\r\n\t\t\t\tthrow new Error('User information cannot be verified')\r\n\t\t\t}\r\n\t\t\t// sanatize the comment field before sending off\r\n\t\t\tif (containsBadChar(newComment)) {\r\n\t\t\t\t// *** update this error message into a toast\r\n\t\t\t\tconsole.error(\r\n\t\t\t\t\t'Comments cannot contain special characters. Please only use numbers and letters. Space, periods, exclamation points, and question marks are okay. Please remove the special characters before saving'\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\t// -- currentlyLoggedInUser is an object with the key id, name, email\r\n\t\t\t\tawait addComment(taskId, newComment, userObj)\r\n\t\t\t\tsetNewComment('') // -- resets the form after submitting\r\n\t\t\t\t// -- because onSnapshop was used to generate the list of comments, the new comment should automatically be displayed\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\talert(error.message)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"border p-2\">\r\n\t\t\t<form className=\"input-group mb-3\" onSubmit={handleSubmit}>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\tplaceholder=\"Add a new comment...\"\r\n\t\t\t\t\taria-label=\"New comment input field\"\r\n\t\t\t\t\taria-describedby=\"button-comment\"\r\n\t\t\t\t\tvalue={newComment}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"input-group-append\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn-secondary\"\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tid=\"button-comment\"\r\n\t\t\t\t\t\tonClick={handleSubmit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t+ Comment\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\r\n\t\t\t<CommentsList taskId={taskId} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {useParams} from '@reach/router' // -- NOTE gets the dynamic segment directly from the url instead of being passed as a prop. useful because we are using the middleware ProtectedRoute\r\nimport TaskForm from '../components/TaskForm'\r\nimport CommentsSection from '../components/CommentsSection'\r\n\r\nexport default function TaskPage() {\r\n\tconst taskId = useParams().taskId\r\n\r\n\t// -- if there is no task number provided(i.e. creating a new task)\r\n\tif (taskId === undefined) {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<TaskForm taskId={null} />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\t// *** TODO below\r\n\t// -- this path is reachable when the url with a taskId is bookmarked (and the user is logged in), implement the following:\r\n\t// -- 1. if the task id no longer exist ->\r\n\t// if (!confirmTaskIdExist(taskId)) {\r\n\t// \treturn <h1>The task you are looking for doesn't exist</h1>\r\n\t// }\r\n\t// -- 2. set restriction rights to access only the authorized tasks\r\n\r\n\treturn (\r\n\t\t<div className=\"container\">\r\n\t\t\t<TaskForm taskId={taskId} />\r\n\t\t\t<h5 className=\"mt-3\">Comment List:</h5>\r\n\t\t\t<CommentsSection taskId={taskId} />\r\n\t\t</div>\r\n\t)\r\n}\r\n","// *** Make this page nicer\r\n\r\nexport default function NotFound() {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div>404: Page not founh</div>\r\n\t\t</>\r\n\t)\r\n}\r\n","import firebase from 'firebase/app'\r\nconst db = firebase.firestore()\r\n\r\n// *** Note that it won't resolve while offlined. Need to handle this situation\r\nexport const updateUserInfo = async (userId, ObjToBeSaved) => {\r\n\ttry {\r\n\t\tconst docReference = db.collection('users').doc(userId)\r\n\t\tawait docReference.update(ObjToBeSaved)\r\n\t\treturn true\r\n\t} catch (error) {\r\n\t\treturn false\r\n\t}\r\n}\r\n","import React, {useEffect, useState} from 'react'\r\nimport {useParams} from '@reach/router' // -- NOTE gets the dynamic segment directly from the url instead of being passed as a prop. useful because we are using the middleware ProtectedRoute\r\nimport {getUserInfo} from '../services/user/getUserInfo'\r\nimport {updateUserInfo} from '../services/user/updateUserInfo'\r\nimport ErrorForm from '../components/ErrorForm'\r\n\r\nexport default function EditUserPage() {\r\n\t// -- user id to be modified is taken from the url\r\n\t// *** currently any log-in user can modify other user info (name and jobLevel) as long as they have the user's unique firestore id number. To set restrictions based on jobLevel\r\n\tconst userId = useParams().userId\r\n\r\n\t// *** adding an email and password update feature means accessing firebase.auth(). This project will just stick with just database changes for now (firestore)\r\n\t// -- updating the jobLevel will change access right to the app\r\n\tconst [existingData, setExistingData] = useState({\r\n\t\tname: '',\r\n\t\tjobLevel: '',\r\n\t})\r\n\tconst [newData, setNewData] = useState({\r\n\t\tname: '',\r\n\t\tjobLevel: '',\r\n\t})\r\n\tconst [errorMessage, setErrorMessage] = useState(null)\r\n\r\n\t// -- initial load of existing user information on mount of component\r\n\tuseEffect(() => {\r\n\t\tasync function loadUserData() {\r\n\t\t\tconst userObj = await getUserInfo(userId)\r\n\t\t\tsetExistingData({name: userObj.name, jobLevel: userObj.jobLevel})\r\n\t\t\tsetNewData({name: userObj.name, jobLevel: userObj.jobLevel})\r\n\t\t}\r\n\t\tloadUserData()\r\n\t}, [userId])\r\n\r\n\t// -- Activate/Deactivate submit button by checking if the user changed the initial information\r\n\tuseEffect(() => {\r\n\t\tconst buttonRef = document.querySelector('#submitButton')\r\n\t\tif (\r\n\t\t\tnewData.name === existingData.name &&\r\n\t\t\tnewData.jobLevel === existingData.jobLevel\r\n\t\t) {\r\n\t\t\t// -- assigned the 'disabled' attribute to the button element\r\n\t\t\tbuttonRef.attributes.setNamedItem(document.createAttribute('disabled'))\r\n\t\t} else {\r\n\t\t\tif (buttonRef.hasAttribute('disabled')) {\r\n\t\t\t\tbuttonRef.attributes.removeNamedItem('disabled')\r\n\t\t\t}\r\n\t\t}\r\n\t}, [newData, existingData])\r\n\r\n\t// -- record user's changes to the state\r\n\tfunction handleChange(e) {\r\n\t\tsetNewData({\r\n\t\t\t...newData,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t})\r\n\t}\r\n\r\n\tasync function handleSubmit(e) {\r\n\t\te.preventDefault()\r\n\t\tlet ObjToBeSaved = {name: newData.name, jobLevel: newData.jobLevel}\r\n\r\n\t\tlet result = await updateUserInfo(userId, ObjToBeSaved)\r\n\r\n\t\tif (result) {\r\n\t\t\talert('record updated') // **** modal/toast that update has been saved\r\n\t\t\tsetExistingData(ObjToBeSaved)\r\n\t\t\t// -- Once setExistingData(ObjToBeSaved) is triggered, the useEffect to Activate/Deactivate kicks in and disables the button again\r\n\t\t} else {\r\n\t\t\tsetErrorMessage('Trouble updating the information. Please try again.')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form className=\"mt-3\" onSubmit={handleSubmit}>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row justify-content-center\">\r\n\t\t\t\t\t<div className=\"col-lg-8\">\r\n\t\t\t\t\t\t<div className=\"card bg-light\">\r\n\t\t\t\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t\t\t\t<h3 className=\"font-weight-light mb-3\">\r\n\t\t\t\t\t\t\t\t\tEdit User Information\r\n\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t<div className=\"form-row\">\r\n\t\t\t\t\t\t\t\t\t{errorMessage ? (\r\n\t\t\t\t\t\t\t\t\t\t<ErrorForm errorMessage={errorMessage} />\r\n\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t<section className=\"col-sm-12 form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control-label sr-only\"\r\n\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"name\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tName\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={newData.name}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"form-row\">\r\n\t\t\t\t\t\t\t\t\t<section className=\"col-sm-12 form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control-label sr-only\"\r\n\t\t\t\t\t\t\t\t\t\t\thtmlFor=\"name\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tJob Level\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"custom-select\"\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"jobLevel\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"jobLevel\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={newData.jobLevel}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{/* Form is prevented from being submitted when the job level is not selecetd thanks to the 'required' property above and the value='' below  */}\r\n\t\t\t\t\t\t\t\t\t\t\t<option defaultValue value=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tJob Level...\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"L1\">L1: General Employee</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"L2\">L2: Supervisor</option>\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"form-group text-right mb-0\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tid=\"submitButton\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tUpdate Info\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport {navigate} from '@reach/router'\r\n\r\n// -- service that takes only display the component if the user has logged in, else they get redirected to the login page\r\n// -- protected routes will show 'Loading' until the user has been resolved\r\nexport const ProtectedRoute = ({isLoading, isAuth, children}) => {\r\n\tif (isLoading) {\r\n\t\treturn <div>Loading...</div> // -- displayed until user credentials are loaded\r\n\t}\r\n\r\n\t// -- ** insert feature: floating modal to remind of logging 1st ** -- //\r\n\r\n\tif (!isAuth) {\r\n\t\tnavigate('/login')\r\n\t}\r\n\r\n\treturn children\r\n}\r\n","import {useEffect, useState} from 'react'\r\nimport {addAuthListener} from './addAuthListener'\r\nimport {getCurrentAuthUser} from './getCurrentAuthUser'\r\n\r\n/*\r\nuseAuth is a custom React Hook. \r\nhttps://reactjs.org/docs/hooks-custom.html\r\nOn user login status change, it load and return the login credentials (+ simple coded isLoading status) to authInfo \r\n*/\r\nexport const useAuth = () => {\r\n\tconst [authInfo, setAuthInfo] = useState(() => {\r\n\t\tconst authUser = getCurrentAuthUser()\r\n\t\tconst isLoading = !authUser\r\n\t\treturn {isLoading, authUser}\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tconst unsubscribe = addAuthListener((authUser) => {\r\n\t\t\tsetAuthInfo({isLoading: false, authUser})\r\n\t\t\t// -- isLoading true on initial mount, and will be false thereafter because we now have a defined value for authUser (either null or user data)\r\n\t\t})\r\n\t\treturn unsubscribe // -- basically means that React will automatically call this unsubscribe function when the hook/component unmounts --- a clean up\r\n\t}, []) // -- empty array because only need need to add the listener when component mounts. The listener will stay active until unsubscribed during unmount\r\n\r\n\treturn authInfo // -- the value of the 'user' key will be null when not logged in or when logging out\r\n}\r\n","import firebase from 'firebase/app'\r\n\r\n// Wrapper for Firebase api\r\n// could have used this code directly in useAuth.js, but here we extracted the code to make a wrapper,so that we can easily migrate away from Firebase, if required.\r\nexport const addAuthListener = (callback) => {\r\n\t// -- onChange is an intermediary function that allows us (if desired) to pass exactly what we want to the callback by modifying condation A and condition B\r\n\t// -- this makes sure we are not locked into the firebase api onAuthStateChanged(), and makes it easier to switch to another service\r\n\tconst onChange = (userCredential) => {\r\n\t\tif (userCredential) {\r\n\t\t\t// -- condition A\r\n\t\t\tcallback({id: userCredential.uid, email: userCredential.email}) // -- we specify specific properties from the user obj to return by onAuthStateChanged(), such as {id: user.uid, email: user.email}\r\n\t\t} else {\r\n\t\t\t// -- condition B: where onAuthStateChanged returns null (logout)\r\n\t\t\tcallback(null)\r\n\t\t}\r\n\t}\r\n\treturn firebase.auth().onAuthStateChanged(onChange) // -- .onAuthStateChanged() passes the user credentials || null to the function onChange\r\n}\r\n","import React from 'react'\r\nimport {Router} from '@reach/router'\r\n// -- initialize firebase\r\nimport './FirebaseConfig'\r\n\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport 'bootstrap/dist/js/bootstrap'\r\nimport './App.css'\r\n\r\nimport BtnPortfolio from './components/resumeBanner/BtnPortfolio'\r\nimport Navigation from './components/Navigation'\r\nimport HomePage from './pages/HomePage'\r\nimport LoginPage from './pages/LoginPage'\r\nimport RegisterPage from './pages/RegisterPage'\r\nimport DashboardPage from './pages/DashboardPage'\r\nimport TaskPage from './pages/TaskPage'\r\nimport NotFoundPage from './pages/NotFoundPage'\r\nimport EditUserPage from './pages/EditUserPage'\r\n\r\nimport {ProtectedRoute} from './services/general/ProtectedRoute'\r\nimport {useAuth} from './services/firebaseAuth/useAuth'\r\nimport {useFirestoreUserDoc} from './services/user/useFirestoreUserDoc'\r\n\r\nfunction App() {\r\n\tlet userId = null\r\n\t// -- updates when login status changes, 'user' has property user.id and user.email\r\n\tlet {authUser, isLoading} = useAuth()\r\n\t// -- updates when the user profile changes in Firestore\r\n\tif (authUser !== null) {\r\n\t\tuserId = authUser.id // -- NOTE that user obj is returned from Auth(). It has the auto generated property 'uid' instead of 'id'\r\n\t}\r\n\t// -- Listener for changes to the user's profile. Returns null if no one is logged in\r\n\t// -- can simplify this code further by creating a new function called useCurrentFirestoreUserDoc, which has no need for the userId param\r\n\tlet userObj = useFirestoreUserDoc(userId)\r\n\r\n\treturn (\r\n\t\t<div id=\"app\">\r\n\t\t\t<Navigation userObj={userObj} />\r\n\t\t\t<BtnPortfolio />\r\n\t\t\t<Router>\r\n\t\t\t\t<HomePage path=\"/\" isAuth={!!authUser} />\r\n\t\t\t\t<LoginPage path=\"login\" />\r\n\t\t\t\t<RegisterPage path=\"register\" />\r\n\t\t\t\t<ProtectedRoute path=\"/\" isLoading={isLoading} isAuth={!!authUser}>\r\n\t\t\t\t\t<DashboardPage path=\"dashboard\" />\r\n\t\t\t\t\t<EditUserPage path=\"editUser/:userId\" />\r\n\t\t\t\t\t<TaskPage path=\"editTask\" />\r\n\t\t\t\t\t<TaskPage path=\"editTask/:taskId\" />\r\n\t\t\t\t\t<NotFoundPage default />\r\n\t\t\t\t</ProtectedRoute>\r\n\t\t\t</Router>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default App\r\n","import firebase from 'firebase/app'\r\nimport {useEffect, useState} from 'react'\r\n// import {getUserInfo} from './getUserInfo'\r\n\r\n// -- React custom hook return the Firestore userObj for a given userId\r\n// -- It will also listen for changes to the doc\r\nexport const useFirestoreUserDoc = function (userId) {\r\n\tconst [userObj, setUserObj] = useState(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userId === null || userId === undefined) {\r\n\t\t\tsetUserObj(null)\r\n\t\t} else {\r\n\t\t\tconst userDocRef = firebase.firestore().collection('users').doc(userId)\r\n\r\n\t\t\tconst unsubscribe = userDocRef.onSnapshot(\r\n\t\t\t\t(snapshot) => {\r\n\t\t\t\t\tsetUserObj({id: userId, ...snapshot.data()})\r\n\t\t\t\t},\r\n\t\t\t\t(error) => {\r\n\t\t\t\t\tthrow new Error('Error finding the user document: ' + error.message)\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\treturn () => unsubscribe()\r\n\t\t}\r\n\t}, [userId])\r\n\r\n\treturn userObj\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}