(this["webpackJsonptask-tracker-firebase"]=this["webpackJsonptask-tracker-firebase"]||[]).push([[0],{33:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a(3),s=a.n(n),c=a(25),o=a.n(c),i=(a(33),a(10)),l=a(6);a(39),a(41),a(51),a(52);l.a.initializeApp({apiKey:"AIzaSyC4AqLcu0oB49R0374JDOr-CQJOIsfS8Yw",authDomain:"task-tracker-84155.firebaseapp.com",databaseURL:"https://task-tracker-84155.firebaseio.com",projectId:"task-tracker-84155",storageBucket:"task-tracker-84155.appspot.com",messagingSenderId:"383114024098",appId:"1:383114024098:web:08712aa4c5d195057333fb",measurementId:"G-C9X0PD11Q6"}),l.a.functions().useEmulator("http://localhost:5001");l.a,a(44),a(45),a(48);var u=a(22),d=a(4),b=a.n(d),m=a(8),j=function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.auth().signOut();case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error("Error with sign out");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();var p=function(e){var t=e.userObj;return Object(r.jsx)("nav",{className:"site-nav family-sans navbar navbar-expand bg-primary navbar-dark higher",children:Object(r.jsxs)("div",{className:"container-fluid",children:[Object(r.jsxs)(i.a,{to:"/",className:"navbar-brand",children:[Object(r.jsx)(u.a,{className:"mr-1"}),"Task Tracker"]}),Object(r.jsxs)("div",{className:"navbar-nav ml-auto",children:[!t&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(i.a,{className:"nav-item nav-link",to:"register",children:"register"}),Object(r.jsx)(i.a,{className:"nav-item nav-link",to:"login",children:"log in"})]}),t&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(i.a,{className:"nav-item nav-link",to:"editUser/"+t.id,children:t.name+","}),Object(r.jsx)(i.a,{className:"nav-item nav-link",to:"/login",onClick:function(){j()},children:"log out"})]})]})]})})};var h=function(e){return e.isAuth&&Object(i.c)("/dashboard"),Object(r.jsx)("div",{className:"container text-center",children:Object(r.jsx)("div",{className:"row justify-content-center",children:Object(r.jsxs)("div",{className:"col-10 col-md-10 col-lg-8 col-xl-7",children:[Object(r.jsx)("div",{className:"display-4 text-primary mt-3 mb-2",children:"Task Dashboard"}),Object(r.jsx)("p",{className:"lead",children:"Please login to see your dashboard."}),Object(r.jsx)(i.a,{to:"/register",className:"btn btn-outline-primary mr-2",children:"Register"}),Object(r.jsx)(i.a,{to:"/login",className:"btn btn-outline-primary mr-2",children:"Log In"})]})})})},f=a(12),O=a(7),v=a(9);var x=function(e){return Object(r.jsx)("div",{className:"col-12 alert alert-danger px-3",children:e.errorMessage})},g=function(){var e=Object(m.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.auth().signInWithEmailAndPassword(t,a);case 3:return r=e.sent,e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error signing in");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}();var k=function(){var e=Object(n.useState)({email:"",password:"",errorMessage:null}),t=Object(v.a)(e,2),a=t[0],s=t[1];function c(e){s(Object(O.a)(Object(O.a)({},a),{},Object(f.a)({},e.target.name,e.target.value)))}return Object(r.jsx)("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),g(a.email,a.password).then((function(e){e&&Object(i.c)("/dashboard")})).catch((function(e){null!==e.message?s(Object(O.a)(Object(O.a)({},a),{},{errorMessage:e.message})):s(Object(O.a)(Object(O.a)({},a),{},{errorMessage:null}))}))},children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row justify-content-center",children:Object(r.jsx)("div",{className:"col-lg-6",children:Object(r.jsx)("div",{className:"card bg-light",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h3",{className:"font-weight-light mb-3",children:"Log in"}),a.errorMessage&&Object(r.jsx)(x,{errorMessage:a.errorMessage}),Object(r.jsxs)("section",{className:"form-group",children:[Object(r.jsx)("label",{className:"form-control-label sr-only",htmlFor:"Email",children:"Email"}),Object(r.jsx)("input",{required:!0,className:"form-control",type:"email",id:"email",name:"email",placeholder:"Email",value:a.email,onChange:c})]}),Object(r.jsx)("section",{className:"form-group",children:Object(r.jsx)("input",{required:!0,className:"form-control",type:"password",name:"password",placeholder:"Password",value:a.password,onChange:c})}),Object(r.jsx)("div",{className:"form-group text-right mb-0",children:Object(r.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Log in"})}),Object(r.jsx)("div",{children:"*Note that your login credentials will be remembered on this browser/computer. When using a public computer, please logout after completing your updates."})]})})})})})})};function N(e,t){return y.apply(this,arguments)}function y(){return(y=Object(m.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.auth().createUserWithEmailAndPassword(t,a);case 3:return r=e.sent,e.abrupt("return",r.user.uid);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(e,t,a,r){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(b.a.mark((function e(t,a,r,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.firestore().collection("users").doc(t).set({name:a,email:r,jobLevel:n}).catch((function(e){throw new Error(e.message)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return L.apply(this,arguments)}function L(){return(L=Object(m.a)(b.a.mark((function e(t){var a,r,n,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.email,n=t.jobLevel,s=t.password,e.prev=1,e.next=4,N(r,s);case 4:return c=e.sent,e.next=7,w(c,a,r,n);case 7:alert("Registration completed sucessfully"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}var D=function(){var e=Object(n.useState)({name:"",email:"",jobLevel:"",passOne:"",passTwo:""}),t=Object(v.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),o=Object(v.a)(c,2),l=o[0],u=o[1];function d(e){s(Object(O.a)(Object(O.a)({},a),{},Object(f.a)({},e.target.name,e.target.value)))}function j(){return(j=Object(m.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.passOne===a.passTwo){e.next=4;break}return u("Passwords do not match. Please fix before re-submitting."),e.abrupt("return");case 4:return r={name:a.name,email:a.email,jobLevel:a.jobLevel,password:a.passOne},e.next=7,T(r);case 7:Object(i.c)("/dashboard");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){a.passOne!==a.passTwo?u("Passwords do not match."):u(null)}),[a.passOne,a.passTwo]),Object(r.jsx)("form",{className:"mt-3",onSubmit:function(e){return j.apply(this,arguments)},children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row justify-content-center",children:Object(r.jsx)("div",{className:"col-lg-8",children:Object(r.jsx)("div",{className:"card bg-light",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h3",{className:"font-weight-light mb-3",children:"Register"}),Object(r.jsxs)("div",{className:"form-row",children:[l?Object(r.jsx)(x,{errorMessage:l}):null,Object(r.jsxs)("section",{className:"col-sm-12 form-group",children:[Object(r.jsx)("label",{className:"form-control-label sr-only",htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{className:"form-control",type:"text",id:"name",placeholder:"Name",name:"name",required:!0,value:a.name,onChange:d})]})]}),Object(r.jsxs)("div",{className:"form-row",children:[Object(r.jsxs)("section",{className:"col-sm-6 form-group",children:[Object(r.jsx)("label",{className:"form-control-label sr-only",htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{className:"form-control",type:"email",id:"email",placeholder:"Email Address",required:!0,name:"email",value:a.email,onChange:d})]}),Object(r.jsxs)("section",{className:"col-sm-6 form-group",children:[Object(r.jsx)("label",{className:"form-control-label sr-only",htmlFor:"name",children:"Job Level"}),Object(r.jsxs)("select",{className:"custom-select",name:"jobLevel",id:"jobLevel",value:a.jobLevel,onChange:d,required:!0,children:[Object(r.jsx)("option",{defaultValue:!0,value:"",children:"Job Level..."}),Object(r.jsx)("option",{value:"L1",children:"L1: General Employee"}),Object(r.jsx)("option",{value:"L2",children:"L2: Supervisor"})]})]})]}),Object(r.jsxs)("div",{className:"form-row",children:[Object(r.jsx)("section",{className:"col-sm-6 form-group",children:Object(r.jsx)("input",{className:"form-control",type:"password",name:"passOne",placeholder:"Password",value:a.passOne,onChange:d})}),Object(r.jsx)("section",{className:"col-sm-6 form-group",children:Object(r.jsx)("input",{className:"form-control",type:"password",required:!0,name:"passTwo",placeholder:"Repeat Password",value:a.passTwo,onChange:d})})]}),Object(r.jsx)("div",{className:"form-group text-right mb-0",children:Object(r.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Register"})})]})})})})})})},S=a(27);function I(e){var t=e.filteredTasksArray;if(0===t.length)return Object(r.jsx)("h3",{children:"There are currently no task associated with your user name."});var a=t.map((function(e){return Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"card-header p-0",id:e.id,children:Object(r.jsxs)("div",{className:"btn btn-block text-left",type:"button","data-toggle":"collapse","data-target":"#collapse".concat(e.id),"aria-expanded":"false","aria-controls":"collapse".concat(e.id),children:[Object(r.jsx)("button",{type:"button",className:"btn btn-lg btn-outline-secondary col-1 p-2",title:"Click to Edit Task",onClick:function(t){!function(e,t){e.stopPropagation(),Object(i.c)("editTask/"+t)}(t,e.id)},children:Object(r.jsx)(u.b,{})}),Object(r.jsx)("div",{className:"btn text-truncate text-nowrap text-left col-10",children:e.taskName}),Object(r.jsx)("div",{className:"btn col-1",children:Object(r.jsx)(S.a,{})})]})}),Object(r.jsx)("div",{id:"collapse".concat(e.id),className:"collapse","aria-labelledby":e.id,"data-parent":"#taskListaccordion",children:Object(r.jsxs)("div",{className:"card-body text-left ",children:[Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"card-title row justify-content-between",children:[Object(r.jsxs)("span",{children:["Priority: ","p1"===e.priority&&" Low","p2"===e.priority&&" High"]}),Object(r.jsxs)("span",{children:["Due Date: ",e.dateDue]})]})}),Object(r.jsx)("p",{className:"card-text",children:e.taskDescription})]})})]},e.id)}));return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"accordion",id:"taskListaccordion",children:a})})}var E=a(19),A=function(){var e=l.a.auth().currentUser;return e?{id:e.uid,email:e.email}:null},F=function(){var e=R("nameTaskCreatorId"),t=R("nameResponsibleId");return function(e){var t=function(e){return e.id},a=new Set;return e.filter((function(e){return!a.has(t(e))&&(a.add(t(e)),!0)}))}([].concat(Object(E.a)(e),Object(E.a)(t)))},R=function(e){var t=A(),a=Object(n.useState)([]),r=Object(v.a)(a,2),s=r[0],c=r[1];return Object(n.useEffect)((function(){var a=[],r=l.a.firestore().collection("tasks").where(e,"==",t.id).onSnapshot((function(e){a=(a=e.docs.map((function(e){return Object(O.a)({id:e.id},e.data({serverTimestamps:"estimate"}))}))).map((function(e){var t=e.dateCreated.toDate();return t=t.toISOString().slice(0,10),e.dateCreated=t,{id:e.id,dateCreated:e.dateCreated,dateDue:e.dateDue,priority:e.priority,status:e.status,nameTaskCreator:e.nameTaskCreator,nameTaskCreatorId:e.nameTaskCreatorId,nameResponsible:e.nameResponsible,nameResponsibleId:e.nameResponsibleId,taskName:e.taskName,taskDescription:e.taskDescription}})),c(a)}));return function(){return r()}}),[]),s};var P=a(18),q=function(e){return/[^a-z0-9\s\u0021\u003F\u002E]/gi.test(e)},U=function(e){var t=e.trim().toLowerCase().split(" ");return t=t.filter((function(e){return e.length>0}))},M=function(e,t,a){var r=[];switch(a){case"recent":r=function(e){return e.sort((function(e,t){return Date.parse(e.dateCreated)-Date.parse(t.dateCreated)}))}(e);break;case"dueDate":r=B(e);break;case"priority":r=function(e){var t=e.filter((function(e){return"p1"===e.priority})),a=e.filter((function(e){return"p2"===e.priority}));return[].concat(Object(E.a)(B(a)),Object(E.a)(B(t)))}(e)}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[],r=[];if(0===t.length)return e;q(t)?console.error("This field only accepts letters, digits, and spaces"):(a=U(t),r=e.filter((function(e){var t,r=Object(P.a)(a);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!e.taskName.toLowerCase().includes(n)&&!e.taskDescription.toLowerCase().includes(n))return!1}}catch(s){r.e(s)}finally{r.f()}return!0})));return r}(r,t)};function B(e){return e.sort((function(e,t){return Date.parse(e.dateDue)-Date.parse(t.dateDue)}))}function J(){var e=Object(n.useState)("recent"),t=Object(v.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),o=Object(v.a)(c,2),l=o[0],u=o[1],d=F(),b=[];return 0!==d.length&&void 0!==d&&null!==d&&(b=M(d,l,a)),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"container text-center",children:Object(r.jsx)("div",{className:"row justify-content-center",children:Object(r.jsxs)("div",{className:"col-10 col-md-10 col-lg-8 col-xl-7",children:[Object(r.jsx)("div",{className:"display-4 text-primary mt-3 mb-2",children:"Task Dashboard"}),Object(r.jsx)("button",{className:"btn btn-secondary",onClick:function(e){e.preventDefault(),Object(i.c)("editTask")},children:"Create New Task"}),Object(r.jsx)("p",{className:"lead",children:"Tasks assigned to you:"}),Object(r.jsxs)("div",{className:"input-group mb-3",children:[Object(r.jsx)("input",{type:"text",className:"form-control","aria-label":"Text input with dropdown button",placeholder:"Enter search keywords...",autoFocus:!0,value:l,onChange:function(e){return u(e.target.value)}}),Object(r.jsx)("input",{type:"Query Type Label",className:"form-control text-center col-lg-3","aria-label":"",value:"Order Search by:",disabled:!0}),Object(r.jsxs)("select",{className:"custom-select col-lg-3",name:"orderBy",value:a,onChange:function(e){return s(e.target.value)},required:!0,children:[Object(r.jsx)("option",{value:"recent",defaultValue:!0,children:"Recently Added"}),Object(r.jsx)("option",{value:"dueDate",children:"Due Date"}),Object(r.jsx)("option",{value:"priority",children:"Priority"})]})]}),Object(r.jsx)(I,{filteredTasksArray:b})]})})})})}var V=l.a.firestore(),G=function(){var e=Object(m.a)(b.a.mark((function e(t){var a,r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",null);case 2:return a=V.collection("users").doc(t),e.next=5,a.get();case 5:if((r=e.sent).exists){e.next=8;break}return e.abrupt("return",null);case 8:return n=r.data(),e.abrupt("return",Object(O.a)(Object(O.a)({},n),{},{id:t}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(m.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=A()){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,G(t.id);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function H(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(m.a)(b.a.mark((function e(t){var a,r,n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.a.firestore().collection("tasks").doc(t),e.next=3,a.get();case 3:return r=e.sent,n=r.data(),s=(s=n.dateCreated.toDate()).toISOString().slice(0,10),e.abrupt("return",{id:t,dateCreated:s,dateDue:n.dateDue,priority:n.priority,status:n.status,nameResponsible:n.nameResponsible,nameResponsibleId:n.nameResponsibleId,nameTaskCreator:n.nameTaskCreator,nameTaskCreatorId:n.nameTaskCreatorId,taskDescription:n.taskDescription,taskName:n.taskName});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){var t=l.a.firestore().collection("users").where("jobLevel","==",e).orderBy("name","asc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(O.a)({id:e.id},e.data())}));s(t)}),(function(e){throw new Error("Error: "+e.message)}));return function(){return t()}}),[]),r}function K(e){return X.apply(this,arguments)}function X(){return(X=Object(m.a)(b.a.mark((function e(t){var a,r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.a.firestore().collection("tasks"),e.prev=1,e.next=4,a.add(t);case 4:return r=e.sent,e.next=7,r.get();case 7:return n=e.sent,e.abrupt("return",Object(O.a)({id:r.id},n.data()));case 11:throw e.prev=11,e.t0=e.catch(1),alert(e.t0.message),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function Y(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(m.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete a.dateCreated,r=l.a.firestore().collection("tasks").doc(t),e.prev=2,e.next=5,r.update(a);case 5:return e.abrupt("return",!0);case 8:throw e.prev=8,e.t0=e.catch(2),alert(e.t0.message),new Error("Could not update the Task. Please contact Helpdesk.");case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function $(e,t,a){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(b.a.mark((function e(t,a,r){var n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.a.firestore().collection("tasks").doc(t).collection("comments"),e.prev=1,e.next=4,n.add({comment:a,name:r.name,userId:r.id,email:r.email,timestamp:l.a.firestore.FieldValue.serverTimestamp()});case 4:return s=e.sent,e.abrupt("return",s.id);case 8:e.prev=8,e.t0=e.catch(1),alert("Errow with saving the comment: "+e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ee(e){var t=e.taskId,a=void 0===t?null:t,s=Object(n.useState)({}),c=Object(v.a)(s,2),o=c[0],u=c[1],d=Object(n.useState)({priority:"",status:"",dateDue:"",nameResponsible:"",nameResponsibleId:"",taskName:"",taskDescription:""}),j=Object(v.a)(d,2),p=j[0],h=j[1],x=Object(n.useState)({priority:"",status:"",dateDue:"",nameResponsible:"",nameResponsibleId:"",taskName:"",taskDescription:""}),g=Object(v.a)(x,2),k=g[0],N=g[1],y=Object(n.useState)({dateCreated:"",nameTaskCreator:"",nameTaskCreatorId:""}),w=Object(v.a)(y,2),C=w[0],T=w[1],L=W("L1").map((function(e){return Object(r.jsx)("option",{"data-key":e.id,value:e.name,children:e.name},e.id)})),D=W("L2").map((function(e){return Object(r.jsx)("option",{"data-key":e.id,value:e.name,children:e.name},e.id)}));function S(e){h(Object(O.a)(Object(O.a)({},p),{},Object(f.a)({},e.target.name,e.target.value)))}function I(e){switch(e.value){case"":e.setAttribute("style","background-color:white; color:black");break;case"p1":e.setAttribute("style","background-color:yellow; color:black");break;case"p2":e.setAttribute("style","background-color:orange; color:white");break;case"s1":e.setAttribute("style","background-color:green; color:white");break;case"s2":e.setAttribute("style","background-color:gray; color:black");break;case"s3":e.setAttribute("style","background-color:black; color:white")}}function E(){return(E=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null!==a){e.next=14;break}if(!q(p.taskName)&&!q(p.taskDescription)){e.next=6;break}console.error("Comments cannot contain special characters. Please only use numbers and letters. Space, periods, exclamation points, and question marks are okay. Please remove the special characters before saving"),e.next=12;break;case 6:return e.next=8,K(Object(O.a)(Object(O.a)({},p),{},{nameTaskCreator:o.name,nameTaskCreatorId:o.id,dateCreated:l.a.firestore.FieldValue.serverTimestamp()}));case 8:A(e.sent.id,"Auto Message: Task is created"),alert("New task is saved"),Object(i.c)("../dashboard");case 12:e.next=22;break;case 14:if(!q(p.taskName)&&!q(p.taskDescription)){e.next=18;break}console.error("Comments cannot contain special characters. Please only use numbers and letters. Space, periods, exclamation points, and question marks are okay. Please remove the special characters before saving"),e.next=22;break;case 18:return e.next=20,Y(a,p);case 20:e.sent&&(A(a,"Auto Message: Task was modified"),alert("Task is updated"),N(p));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return F.apply(this,arguments)}function F(){return(F=Object(m.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:if(r=e.sent){e.next=6;break}throw new Error("User information cannot be verified");case 6:return e.next=8,$(t,a,r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){(function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){null===a&&h((function(e){return Object(O.a)(Object(O.a)({},e),{},{status:"s1"})}))}),[a]),Object(n.useEffect)((function(){null!==a&&function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(a);case 2:t=e.sent,T({dateCreated:t.dateCreated,nameTaskCreator:t.nameTaskCreator,nameTaskCreatorId:t.nameTaskCreatorId}),delete t.dateCreated,delete t.nameTaskCreator,delete t.nameTaskCreatorId,h(Object(O.a)({},t)),N(Object(O.a)({},t));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a]),Object(n.useEffect)((function(){var e=document.querySelectorAll("[data-secured]");if(null!==a&&"L1"===o.jobLevel){var t,r=Object(P.a)(e);try{for(r.s();!(t=r.n()).done;){t.value.attributes.setNamedItem(document.createAttribute("disabled"))}}catch(n){r.e(n)}finally{r.f()}}}),[a,o]),Object(n.useEffect)((function(){var e,t=document.querySelectorAll(".priority"),a=Object(P.a)(t);try{for(a.s();!(e=a.n()).done;){I(e.value)}}catch(c){a.e(c)}finally{a.f()}var r,n=document.querySelectorAll(".status"),s=Object(P.a)(n);try{for(s.s();!(r=s.n()).done;){I(r.value)}}catch(c){s.e(c)}finally{s.f()}}),[p]),Object(n.useEffect)((function(){var e=document.querySelector("#submitButton");p.status===k.status&&p.priority===k.priority&&p.dateDue===k.dateDue&&p.nameResponsible===k.nameResponsible&&p.taskName===k.taskName&&p.taskDescription===k.taskDescription?e.attributes.setNamedItem(document.createAttribute("disabled")):e.hasAttribute("disabled")&&e.attributes.removeNamedItem("disabled")}),[p,k]),Object(r.jsxs)(r.Fragment,{children:[null===a&&Object(r.jsx)("h1",{children:"Create a New Task"}),null!==a&&Object(r.jsx)("h1",{children:"Update the Task"}),Object(r.jsxs)("form",{className:"border p-2",onSubmit:function(e){return E.apply(this,arguments)},children:[Object(r.jsxs)("div",{className:"form-row",children:[Object(r.jsxs)("div",{className:"form-group col-md-3",children:[Object(r.jsx)("label",{className:"form-control-label",htmlFor:"priority",children:"Priority Level:"}),Object(r.jsxs)("select",{className:"custom-select priority",name:"priority",value:p.priority,onChange:function(e){S(e),I(e.target)},required:!0,children:[Object(r.jsx)("option",{defaultValue:!0,className:"priority",value:"",children:"Priority..."}),Object(r.jsx)("option",{value:"p1",className:"priority",children:"Low"}),Object(r.jsx)("option",{value:"p2",className:"priority",children:"High"})]})]}),Object(r.jsxs)("div",{className:"form-group col-md-3",children:[Object(r.jsx)("label",{className:"form-control-label",htmlFor:"dateDue",children:"Deadline:"}),Object(r.jsx)("input",{className:"form-control",type:"date",id:"dateDue",placeholder:"Select Task Deadline...",required:!0,name:"dateDue","data-secured":!0,value:p.dateDue,onChange:S})]}),Object(r.jsxs)("div",{className:"form-group col-md-6",children:[Object(r.jsx)("label",{className:"form-control-label",htmlFor:"nameResponsible",children:"Responsible Employee"}),Object(r.jsxs)("select",{className:"custom-select",name:"nameResponsible",id:"nameResponsible",required:!0,"data-secured":!0,value:p.nameResponsible,onChange:function(e){var t,a=e.target.options.selectedIndex,r=e.target.options[a].getAttribute("data-key");h(Object(O.a)(Object(O.a)({},p),{},(t={},Object(f.a)(t,e.target.name,e.target.value),Object(f.a)(t,"nameResponsibleId",r),t)))},children:[Object(r.jsx)("option",{value:"",defaultValue:!0,disabled:!0,hidden:!0,children:"Select Responsible Employee"}),Object(r.jsx)("optgroup",{label:"L1 General Employees:",children:L}),Object(r.jsx)("optgroup",{label:"L2 Supervisor Level:",children:D})]})]})]}),Object(r.jsxs)("div",{className:"form-row",children:[Object(r.jsxs)("div",{className:"form-group col-md-3",children:[Object(r.jsx)("label",{className:"form-control-label ",htmlFor:"status",children:"Task Status:"}),Object(r.jsxs)("select",{className:"custom-select status",name:"status",id:"status",value:p.status,onChange:function(e){S(e),I(e.target)},required:!0,children:[Object(r.jsx)("option",{defaultValue:!0,className:"status",value:"",children:"Status..."}),Object(r.jsx)("option",{className:"status",value:"s1",children:"In Progress"}),Object(r.jsx)("option",{className:"status",value:"s2",children:"Closing"}),Object(r.jsx)("option",{className:"status",value:"s3",children:"Archived"})]})]}),Object(r.jsx)("div",{className:"form-group col-md-3",children:null!==a&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("label",{className:"form-control-label",htmlFor:"dateCreated",children:"Date Created:"}),Object(r.jsx)("input",{className:"form-control",type:"date",id:"dateCreated",placeholder:"Loading...",name:"dateCreated",value:C.dateCreated,disabled:!0})]})}),Object(r.jsx)("div",{className:"form-group col-md-6",children:null!==a&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("label",{className:"form-control-label",htmlFor:"nameTaskCreator",children:"Task Creator"}),Object(r.jsx)("input",{className:"form-control",type:"text",id:"nameTaskCreator",placeholder:"Leader's Name",name:"nameTaskCreator",value:C.nameTaskCreator,disabled:!0})]})})]}),Object(r.jsx)("label",{className:"form-control-label",htmlFor:"taskName",children:"Task Name:"}),Object(r.jsx)("input",{className:"form-control",type:"text",id:"taskName",placeholder:"Enter Task Name...",name:"taskName",required:!0,"data-secured":!0,value:p.taskName,onChange:S}),Object(r.jsx)("label",{className:"form-control-label",htmlFor:"taskDescription",children:"Task Description:"}),Object(r.jsx)("textarea",{className:"form-control",name:"taskDescription",id:"taskDescription",required:!0,placeholder:"Enter Task Description...",value:p.taskDescription,onChange:S,cols:"30",rows:"5"}),Object(r.jsxs)("button",{id:"submitButton",className:"btn btn-primary mt-2",type:"submit",children:[null===a&&"Create Task",null!==a&&"Update Task"]})]})]})}function te(e){var t=e.taskId,a=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){var t=l.a.firestore().collection("tasks").doc(e).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(O.a)({id:e.id},e.data({serverTimestamps:"estimate"}))}));s(t)}),(function(e){throw new Error("Error: "+e.message)}));return function(){return t()}}),[e]),r}(t).map((function(e){return Object(r.jsxs)("li",{className:"list-group-item list-group-item-action",children:[Object(r.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[Object(r.jsx)("a",{className:"mb-1",href:"mailto:".concat(e.email,"?subject=taskId:").concat(t),children:Object(r.jsx)("small",{children:e.name})}),Object(r.jsx)("small",{className:"text-muted",children:e.timestamp.toDate().toDateString()})]}),Object(r.jsx)("div",{className:"text-muted",children:e.comment})]},e.id)}));return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("ul",{className:"list-group",children:a})})}function ae(e){var t=e.taskId,a=Object(n.useState)(""),s=Object(v.a)(a,2),c=s[0],o=s[1];function i(e){return l.apply(this,arguments)}function l(){return(l=Object(m.a)(b.a.mark((function e(a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,z();case 4:if(r=e.sent){e.next=7;break}throw new Error("User information cannot be verified");case 7:if(!q(c)){e.next=11;break}console.error("Comments cannot contain special characters. Please only use numbers and letters. Space, periods, exclamation points, and question marks are okay. Please remove the special characters before saving"),e.next=14;break;case 11:return e.next=13,$(t,c,r);case 13:o("");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),alert(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"border p-2",children:[Object(r.jsxs)("form",{className:"input-group mb-3",onSubmit:i,children:[Object(r.jsx)("input",{name:"comment",type:"text",className:"form-control",placeholder:"Add a new comment...","aria-label":"New comment input field","aria-describedby":"button-comment",value:c,onChange:function(e){e.preventDefault(),o(e.target.value)}}),Object(r.jsx)("div",{className:"input-group-append",children:Object(r.jsx)("button",{className:"btn btn-secondary",type:"button",id:"button-comment",onClick:i,children:"+ Comment"})})]}),Object(r.jsx)(te,{taskId:t})]})}function re(){var e=Object(i.d)().taskId;return void 0===e?Object(r.jsx)("div",{className:"container",children:Object(r.jsx)(ee,{taskId:null})}):Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(ee,{taskId:e}),Object(r.jsx)("h5",{className:"mt-3",children:"Comment List:"}),Object(r.jsx)(ae,{taskId:e})]})}function ne(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{children:"404: Page not founh"})})}var se=l.a.firestore(),ce=function(){var e=Object(m.a)(b.a.mark((function e(t,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=se.collection("users").doc(t),e.next=4,r.update(a);case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}();function oe(){var e=Object(i.d)().userId,t=Object(n.useState)({name:"",jobLevel:""}),a=Object(v.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)({name:"",jobLevel:""}),l=Object(v.a)(o,2),u=l[0],d=l[1],j=Object(n.useState)(null),p=Object(v.a)(j,2),h=p[0],g=p[1];function k(e){d(Object(O.a)(Object(O.a)({},u),{},Object(f.a)({},e.target.name,e.target.value)))}function N(){return(N=Object(m.a)(b.a.mark((function t(a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r={name:u.name,jobLevel:u.jobLevel},t.next=4,ce(e,r);case 4:t.sent?(alert("record updated"),c(r)):g("Trouble updating the information. Please try again.");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function t(){return(t=Object(m.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e);case 2:a=t.sent,c({name:a.name,jobLevel:a.jobLevel}),d({name:a.name,jobLevel:a.jobLevel});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),Object(n.useEffect)((function(){var e=document.querySelector("#submitButton");u.name===s.name&&u.jobLevel===s.jobLevel?e.attributes.setNamedItem(document.createAttribute("disabled")):e.hasAttribute("disabled")&&e.attributes.removeNamedItem("disabled")}),[u,s]),Object(r.jsx)("form",{className:"mt-3",onSubmit:function(e){return N.apply(this,arguments)},children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row justify-content-center",children:Object(r.jsx)("div",{className:"col-lg-8",children:Object(r.jsx)("div",{className:"card bg-light",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h3",{className:"font-weight-light mb-3",children:"Edit User Information"}),Object(r.jsxs)("div",{className:"form-row",children:[h?Object(r.jsx)(x,{errorMessage:h}):null,Object(r.jsxs)("section",{className:"col-sm-12 form-group",children:[Object(r.jsx)("label",{className:"form-control-label sr-only",htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{className:"form-control",type:"text",id:"name",placeholder:"Name",name:"name",required:!0,value:u.name,onChange:k})]})]}),Object(r.jsx)("div",{className:"form-row",children:Object(r.jsxs)("section",{className:"col-sm-12 form-group",children:[Object(r.jsx)("label",{className:"form-control-label sr-only",htmlFor:"name",children:"Job Level"}),Object(r.jsxs)("select",{className:"custom-select",name:"jobLevel",id:"jobLevel",value:u.jobLevel,onChange:k,required:!0,children:[Object(r.jsx)("option",{defaultValue:!0,value:"",children:"Job Level..."}),Object(r.jsx)("option",{value:"L1",children:"L1: General Employee"}),Object(r.jsx)("option",{value:"L2",children:"L2: Supervisor"})]})]})}),Object(r.jsx)("div",{className:"form-group text-right mb-0",children:Object(r.jsx)("button",{id:"submitButton",className:"btn btn-primary",type:"submit",children:"Update Info"})})]})})})})})})}var ie=function(e){var t=e.isLoading,a=e.isAuth,n=e.children;return t?Object(r.jsx)("div",{children:"Loading..."}):(a||Object(i.c)("/login"),n)},le=function(){var e=Object(n.useState)((function(){var e=A();return{isLoading:!e,authUser:e}})),t=Object(v.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e;return e=function(e){r({isLoading:!1,authUser:e})},l.a.auth().onAuthStateChanged((function(t){e(t?{id:t.uid,email:t.email}:null)}))}),[]),a};var ue=function(){var e=null,t=le(),a=t.authUser,s=t.isLoading;null!==a&&(e=a.id);var c=function(e){var t=Object(n.useState)(null),a=Object(v.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){if(null!==e&&void 0!==e){var t=l.a.firestore().collection("users").doc(e).onSnapshot((function(t){s(Object(O.a)({id:e},t.data()))}),(function(e){throw new Error("Error finding the user document: "+e.message)}));return function(){return t()}}s(null)}),[e]),r}(e);return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:function(){return g("1@1.com","123123")},children:"sign-in"}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{onClick:function(){return console.log(a)},children:"useAuth user value"}),Object(r.jsx)("br",{}),Object(r.jsx)(p,{userObj:c}),Object(r.jsxs)(i.b,{children:[Object(r.jsx)(h,{path:"/",isAuth:!!a}),Object(r.jsx)(k,{path:"login"}),Object(r.jsx)(D,{path:"register"}),Object(r.jsxs)(ie,{path:"/",isLoading:s,isAuth:!!a,children:[Object(r.jsx)(J,{path:"dashboard"}),Object(r.jsx)(oe,{path:"editUser/:userId"}),Object(r.jsx)(re,{path:"editTask"}),Object(r.jsx)(re,{path:"editTask/:taskId"}),Object(r.jsx)(ne,{default:!0})]})]})]})},de=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,53)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))};o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(ue,{})}),document.getElementById("root")),de()}},[[50,1,2]]]);
//# sourceMappingURL=main.66d3cb0a.chunk.js.map